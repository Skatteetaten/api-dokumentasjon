<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper plugin-docs plugin-id-default docs-version-current docs-doc-page docs-doc-id-om/bruk_innrapportering" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.9.2">
<title data-rh="true">Bruk av API-er for innrapportering | API-dokumentasjon</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="https://skatteetaten.github.io/api-dokumentasjon/en/om/bruk_innrapportering"><meta data-rh="true" property="og:locale" content="en"><meta data-rh="true" property="og:locale:alternate" content="nb"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="Bruk av API-er for innrapportering | API-dokumentasjon"><meta data-rh="true" name="description" content="Bruk av re-etablerte tjenester for innrapportering mot Skatteetaten."><meta data-rh="true" property="og:description" content="Bruk av re-etablerte tjenester for innrapportering mot Skatteetaten."><meta data-rh="true" name="keywords" content="datatables,tables,grids,markdown,multimarkdown,jquery plugins"><link data-rh="true" rel="icon" href="/api-dokumentasjon/en/img/favicon.png"><link data-rh="true" rel="canonical" href="https://skatteetaten.github.io/api-dokumentasjon/en/om/bruk_innrapportering"><link data-rh="true" rel="alternate" href="https://skatteetaten.github.io/api-dokumentasjon/om/bruk_innrapportering" hreflang="nb"><link data-rh="true" rel="alternate" href="https://skatteetaten.github.io/api-dokumentasjon/en/om/bruk_innrapportering" hreflang="en"><link data-rh="true" rel="alternate" href="https://skatteetaten.github.io/api-dokumentasjon/om/bruk_innrapportering" hreflang="x-default"><script data-rh="true" type="application/ld+json">{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Bruk av API-er for innrapportering","item":"https://skatteetaten.github.io/api-dokumentasjon/en/om/bruk_innrapportering"}]}</script><link rel="alternate" type="application/atom+xml" href="/api-dokumentasjon/en/nyheter-og-driftsvarsler/atom.xml" title="Skatteetaten - API nyheter Atom Feed"><link rel="stylesheet" href="/api-dokumentasjon/en/assets/css/styles.bc93b744.css">
<script src="/api-dokumentasjon/en/assets/js/runtime~main.c777549f.js" defer="defer"></script>
<script src="/api-dokumentasjon/en/assets/js/main.ade53cb6.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<svg style="display: none;"><defs>
<symbol id="theme-svg-external-link" viewBox="0 0 24 24"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"/></symbol>
</defs></svg>
<script>!function(){var t=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return window.localStorage.getItem("theme")}catch(t){}}();document.documentElement.setAttribute("data-theme",t||"light"),document.documentElement.setAttribute("data-theme-choice",t||"light")}(),function(){try{const c=new URLSearchParams(window.location.search).entries();for(var[t,e]of c)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id="__docusaurus"><div dir="ltr" class="body-98"><div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><div id="__docusaurus_skipToContent_fallback" class="theme-layout-main main-wrapper mainWrapper_z2l0"><div class="docsWrapper_hBAB"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docRoot_UBD9"><aside class="theme-doc-sidebar-container docSidebarContainer_YfHR"><div class="sidebarViewport_aRkj"><div class="sidebar_njMd"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" role="button" aria-expanded="true" href="/api-dokumentasjon/en/"><span title="Om" class="categoryLinkLabel_W154">Om</span></a></div><ul class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/api-dokumentasjon/en/"><span title="Getting started" class="linkLabel_WmDU">Getting started</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/api-dokumentasjon/en/om/bruk"><span title="Bruk av API-er for deling" class="linkLabel_WmDU">Bruk av API-er for deling</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/api-dokumentasjon/en/om/bruk_innrapportering"><span title="Bruk av API-er for innrapportering" class="linkLabel_WmDU">Bruk av API-er for innrapportering</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/api-dokumentasjon/en/om/delegering"><span title="Delegere rettigheter i Altinn" class="linkLabel_WmDU">Delegere rettigheter i Altinn</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/api-dokumentasjon/en/om/feil"><span title="Feil" class="linkLabel_WmDU">Feil</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/api-dokumentasjon/en/om/rettighetspakker"><span title="Rettighetspakker" class="linkLabel_WmDU">Rettighetspakker</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/api-dokumentasjon/en/om/samtykke"><span title="Samtykke" class="linkLabel_WmDU">Samtykke</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/api-dokumentasjon/en/om/sikkerhet"><span title="Sikkerhet" class="linkLabel_WmDU">Sikkerhet</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/api-dokumentasjon/en/om/skjerming"><span title="Skjerming av data" class="linkLabel_WmDU">Skjerming av data</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/api-dokumentasjon/en/om/systembruker"><span title="Systembruker" class="linkLabel_WmDU">Systembruker</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/api-dokumentasjon/en/om/tekniskspesifikasjon"><span title="Teknisk spesifikasjon" class="linkLabel_WmDU">Teknisk spesifikasjon</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/api-dokumentasjon/en/om/varsler"><span title="Varsler" class="linkLabel_WmDU">Varsler</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/api-dokumentasjon/en/om/versjoner"><span title="Versjoner" class="linkLabel_WmDU">Versjoner</span></a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/api-dokumentasjon/en/api/aksjebeholdning"><span title="API-er for deling" class="categoryLinkLabel_W154">API-er for deling</span></a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/api-dokumentasjon/en/api/innrapportering-amelding"><span title="API-er for innrapportering" class="categoryLinkLabel_W154">API-er for innrapportering</span></a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/api-dokumentasjon/en/anvendelsesomraader/ameldingen"><span title="Anvendelsesområder" class="categoryLinkLabel_W154">Anvendelsesområder</span></a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/api-dokumentasjon/en/test/tenor"><span title="Test" class="categoryLinkLabel_W154">Test</span></a></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/api-dokumentasjon/en/kontaktoss"><span title="Kontakt oss" class="linkLabel_WmDU">Kontakt oss</span></a></li></ul></nav></div></div></aside><main class="docMainContainer_TBSr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/api-dokumentasjon/en/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">Om</span></li><li class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link">Bruk av API-er for innrapportering</span></li></ul></nav><div class="theme-doc-markdown markdown"><header><h1>Bruk av API-er for innrapportering</h1></header><div class="summary_ZwcQ"> Bruk av re-etablerte tjenester for innrapportering mot Skatteetaten.</div>
<p>I forbindelse med utfasing av Altinn 2 vil alle tjenester re-etableres hos Skatteetaten.
Overgangen medfører at konsumenter av Skatteetatens tjenester må forholde seg til flere nye systemer og opprette nye
integrasjoner.
Maskinporten med systembruker blir innført som standard løsning for autentisering og autorisering.</p>
<p>Figuren under viser hvilke systemer som er involvert i re-etablert løsning, og hvilke integrasjoner som oppnår hva i en
standard prosess.</p>
<p><img decoding="async" loading="lazy" alt="systemlandskap" src="/api-dokumentasjon/en/assets/images/systemlandskap_altinn3_tjenester-81e3858da48e051a89f1c7f90e993a23.png" width="1630" height="1203" class="img_ev3q"></p>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="forenklet-forklaring-av-stegene">Forenklet forklaring av stegene<a href="#forenklet-forklaring-av-stegene" class="hash-link" aria-label="Direct link to Forenklet forklaring av stegene" title="Direct link to Forenklet forklaring av stegene" translate="no">​</a></h2>
<ol>
<li class="">SBS må onboardes Maskinporten, opprette klient og skaffe seg tilgang til alle scopes man trenger for å benytte
tjenester hos
Skatteetaten og Digdir. Hvilke scopes man trenger, varierer etter hvilke tjenester man ønsker å benytte. Scopes man
trenger for Skatteetatens tjenester er nærmere beskrevet i dokumentasjon for hver tjeneste. I
Maskinporten benyttes reellt organisasjonsnummer for oppkoblingen, både i test og produksjon.</li>
<li class="">SBS må registreres i systemregisteret til Digdir. Her må man også sette opp alle tilgangspakker og/eller
enkelttjenester systembrukerne tilknyttet systemet skal kunne benytte. Systemet i systemregisteret kobles til
Maskinporten-klienten man opprettet i steg 1. Systemet kobles også til reellt organisasjonsnummer både i test og
produksjon.</li>
<li class="">SBS må opprette systembrukere for sine kunder. Forskjellige systemer vil ha forskjellige behov for systembrukere
avhengig av hvilke kunder de har. Systembrukere knyttes også til tilgangspakker og/eller enkelttjenester. Disse
tilgangspakkene og/eller enkelttjenestene må være et sub-sett av tilgangspakkene og/eller enkelttjenestene som er
satt opp for systemet i steg 2. Vi anbefaler å starte <a href="https://samarbeid.digdir.no/altinn/systembruker/2542" target="_blank" rel="noopener noreferrer" class="">her</a> for
å forstå hva en systembruker er. I test kreves det at systembrukere opprettes for syntetiske organisasjoner funnet
i <a href="https://www.skatteetaten.no/testdata/" target="_blank" rel="noopener noreferrer" class="">Tenor testdatasøk</a>.</li>
<li class="">SBS-kundene må godkjenne at SBS kan operere på vegne av dem, ved å godkjenne opprettelse av systembruker i Altinn
brukerflate. Her må person med klientadministrator- eller hovedadministrator-rolle/tilgangspakke logge inn i Altinn
og godkjenne på vegne av organisasjonen. Ved bruk av systembruker for klientforhold, må SBS-kunde også sørge
for at systembrukeren har de rette tilgangene til å operere på vegne av deres klienter.</li>
<li class="">SBS oppretter integrasjon mot Skatteetatens tjeneste (se mer info under &quot;API-er for innrapportering&quot; i venstre meny
for hvert spesifikke API) og kaller denne med et token fra Maskinporten med systembruker.
Skatteetaten vil autentisere kallet mot Maskinporten og autorisere mot Altinn Autorisasjon at systembrukeren har
tilgang til å operere på vegne av den dataene omhandler for en gitt tjenesteressurs.</li>
<li class="">Skatteetaten oppretter nødvendige dialoger i Dialogporten, med tilknyttede forsendelser. Hvilke dialoger og
forsendelser som opprettes kan variere fra tjeneste til tjeneste, men ofte opprettes det dialoger både for den
organisasjonen dataene omhandler og også for organisasjonen tilknyttet systembrukeren. Det opprettes som regel en
forsendelse for innrapporteringen og en annen forsendelse for tilbakemeldingen fra Skatteetaten.</li>
<li class="">Gjennom integrasjon med <a href="https://docs.altinn.studio/nb/dialogporten/reference/events/" target="_blank" rel="noopener noreferrer" class="">Altinn Events</a> kan man abonnere på hendelser som skjer i Dialogporten på vegne av en
organisasjon. På denne måten vil SBS kunne få beskjed når for eksempel en tilbakemelding har kommet på en gitt
innrapportering.</li>
<li class="">Gjennom integrasjon med <a href="https://docs.altinn.studio/nb/dialogporten/reference/openapi/" target="_blank" rel="noopener noreferrer" class="">Dialogporten</a> kan SBS se status på innrapporteringer, og hente ut identifikatorer på
forsendendelser og dokumenter. Denne integrasjonen krever ogs å token fra Maskinporten med systembruker.</li>
<li class="">De fleste tjenester har API for å hente ut dokumenter tilknyttet forsendelser, for eksempel innsendinger og
tilbakemeldinger. Disse API-ene krever som regel identifikatorer for forsendelse og dokument som du får fra
Dialogporten i steg 8.</li>
</ol></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="row margin-top--sm theme-doc-footer-tags-row"><div class="col"><b>Tags:</b><ul class="tags_jXut padding--none margin-left--sm"><li class="tag_QGVx"><a rel="tag" class="tag_zVej tagRegular_sFm0" href="/api-dokumentasjon/en/tags/systemlandskap">Systemlandskap</a></li><li class="tag_QGVx"><a rel="tag" class="tag_zVej tagRegular_sFm0" href="/api-dokumentasjon/en/tags/reetablering">Reetablering</a></li><li class="tag_QGVx"><a rel="tag" class="tag_zVej tagRegular_sFm0" href="/api-dokumentasjon/en/tags/altinn-3">Altinn3</a></li><li class="tag_QGVx"><a rel="tag" class="tag_zVej tagRegular_sFm0" href="/api-dokumentasjon/en/tags/innrapportering">Innrapportering</a></li></ul></div></div></footer></article><nav class="docusaurus-mt-lg pagination-nav" aria-label="Docs pages"><a class="pagination-nav__link pagination-nav__link--prev" href="/api-dokumentasjon/en/om/bruk"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Bruk av API-er for deling</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/api-dokumentasjon/en/om/delegering"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Delegere rettigheter i Altinn</div></a></nav></div></div></div></div></main></div></div></div></div></div>
</body>
</html>