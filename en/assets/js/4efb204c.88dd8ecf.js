"use strict";(self.webpackChunkapi_dokumentasjon=self.webpackChunkapi_dokumentasjon||[]).push([[6383],{569:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>l,contentTitle:()=>o,default:()=>m,frontMatter:()=>a,metadata:()=>s,toc:()=>k});const s=JSON.parse('{"id":"om/samtykke","title":"Samtykke","description":"Skatteetaten tilbyr samtykkebasert datauthenting basert p\xe5 Altinn sin l\xf8sning for digitalt samtykke.","source":"@site/docs/om/samtykke.md","sourceDirName":"om","slug":"/om/samtykke","permalink":"/api-dokumentasjon/en/om/samtykke","draft":false,"unlisted":false,"tags":[{"inline":true,"label":"Samtykke","permalink":"/api-dokumentasjon/en/tags/samtykke"},{"inline":true,"label":"Sikkerhet","permalink":"/api-dokumentasjon/en/tags/sikkerhet"}],"version":"current","frontMatter":{"title":"Samtykke","slug":"/om/samtykke","folder":"om","sidebar":"mydoc_sidebar","datatable":true,"tags":["Samtykke","Sikkerhet"],"keywords":["datatables","tables","grids","markdown","multimarkdown","jquery plugins"],"last_updated":"Nov 24, 2022","hide_table_of_contents":true},"sidebar":"docs","previous":{"title":"Rettighetspakker","permalink":"/api-dokumentasjon/en/om/rettighetspakker"},"next":{"title":"Sikkerhet","permalink":"/api-dokumentasjon/en/om/sikkerhet"}}');var r=t(74848),i=t(28453);const a={title:"Samtykke",slug:"/om/samtykke",folder:"om",sidebar:"mydoc_sidebar",datatable:!0,tags:["Samtykke","Sikkerhet"],keywords:["datatables","tables","grids","markdown","multimarkdown","jquery plugins"],last_updated:"Nov 24, 2022",hide_table_of_contents:!0},o=void 0,l={},k=[{value:"Ny samtykkel\xf8sning",id:"ny-samtykkel\xf8sning",level:2},{value:"F\xe5 tilgang",id:"f\xe5-tilgang",level:2},{value:"Be om samtykke",id:"be-om-samtykke",level:2},{value:"Fjerne samtykke",id:"fjerne-samtykke",level:2},{value:"Tjenester med st\xf8tte for samtykke",id:"tjenester-med-st\xf8tte-for-samtykke",level:2}];function d(e){const n={a:"a",code:"code",em:"em",h2:"h2",img:"img",li:"li",ol:"ol",p:"p",pre:"pre",ul:"ul",...(0,i.R)(),...e.components},{InfoMessageBar:s,Summary:a}=n;return s||h("InfoMessageBar",!0),a||h("Summary",!0),(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(a,{children:" Skatteetaten tilbyr samtykkebasert datauthenting basert p\xe5 Altinn sin l\xf8sning for digitalt samtykke."}),"\n",(0,r.jsx)(n.h2,{id:"ny-samtykkel\xf8sning",children:"Ny samtykkel\xf8sning"}),"\n",(0,r.jsx)(n.p,{children:"Skatteetaten  er i ferd med \xe5 migrere relevante API-er til ny samtykkel\xf8sningen i Altinn 3, og API-ene vil i en overgangsperiode st\xf8tte b\xe5de nytt og gammel samtykke. Detaljerer beskrevet i Digdir sin dokumentasjon:"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.a,{href:"https://docs.altinn.studio/nb/authorization/what-do-you-get/consent/",children:"Samtykke i Altinn 3"})}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.a,{href:"https://docs.altinn.studio/nb/authorization/guides/system-vendor/consent/",children:"Samtykke for datakonsument"})}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:"For at bankene skal ta i bruk ny samtykke-l\xf8sning m\xe5 de:"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["F\xf8rst ",(0,r.jsx)(n.a,{href:"https://docs.altinn.studio/nb/authorization/getting-started/consent/",children:"sette opp den nye l\xf8snigen som Datakonsument/Sluttbrukersystem"})]}),"\n",(0,r.jsxs)(n.li,{children:["Deretter ",(0,r.jsx)(n.a,{href:"https://docs.altinn.studio/nb/authorization/guides/system-vendor/consent/",children:"utstede et maskinporten-token med samtykke"})]}),"\n",(0,r.jsx)(n.li,{children:"Anvende dette som et vanlig maskinporten-token i Authorization-header i kall mot Skatteetaten sine API-er som krever samtykke (AltinnSamtykke-header benyttes ikke lenger, det gjelder kun samtykker i Altinn 2)."}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:"For Summert skattegrunnlag API m\xe5 metadata-objektet i consent-requesten inneholde inntekts\xe5r. Eksempel:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{children:'{\n "id": "95982111-6f94-4845-b3c5-d7c7562305f6",\n "from": "urn:altinn:person:identifier-no:16867298391",\n "to": "urn:altinn:organization:identifier-no:974761076",\n "validTo": "2025-11-10T06:18:12.2597103+00:00",\n "consentRights": [\n   {\n     "action": ["consent"],\n     "resource": [\n       {\n         "type": "urn:altinn:resource",\n         "value": "ske-samtykke-sbl-summert-skattegrunnlag"\n       }\n     ],\n     "metadata": {\n       "inntektsaar": "2024"\n     }\n   }\n ],\n "redirectUrl": "https://www.skatteetaten.no"\n}\n'})}),"\n",(0,r.jsx)(n.p,{children:"For Inntekt API m\xe5 metadata-objektet i consent-requesten inneholde fraogtil og tilogmed. Eksempel:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{children:'{\n "id": "42fff31e-25eb-49e5-8cc3-dc158ad164d2",\n "from": "urn:altinn:person:identifier-no:28846598970",\n "to": "urn:altinn:organization:identifier-no:974761076",\n "validTo": "2025-11-10T06:18:12.2597103+00:00",\n "consentRights": [\n   {\n     "action": ["consent"],\n     "resource": [\n       {\n         "type": "urn:altinn:resource",\n         "value": "ske-samtykke-sbl-inntekt"\n       }\n     ],\n     "metadata": {\n       "fraogmed": "2024-01",\n       "tilogmed": "2024-12"\n     }\n   }\n ],\n "redirectUrl": "https://www.skatteetaten.no"\n}\n'})}),"\n",(0,r.jsxs)(n.p,{children:["Den tekniske flyten blir n\xe5 slik (oppsummert fra Digdir sin dokumentasjon](",(0,r.jsx)(n.a,{href:"https://docs.altinn.studio/nb/authorization/guides/system-vendor/consent/",children:"https://docs.altinn.studio/nb/authorization/guides/system-vendor/consent/"}),"):"]}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsx)(n.li,{children:"Be om samtykke i en consent-request med med egengenerert id (uuid)"}),"\n",(0,r.jsx)(n.li,{children:"F\xe5r respons som bekrefter at samtykke er etterspurt med lenke (viewId) som m\xe5 aksesseres av parten som skal gi samtykke for \xe5 bekrefte at samtykke er avgitt."}),"\n",(0,r.jsx)(n.li,{children:'Hente samtykke ved \xe5 utstede et maskinporten-token der JWT-grantet gjort mot altinn m\xe5 inneholde et "authorization_details"-claim med informasjon om det konkrete samtykke (blant annet hvem som har avgitt samtykket og den unike IDen fra consent-requestet). Tokenet man f\xe5r benyttes mot tjenestene v\xe5re som et vanlig maskinporten-token men er ogs\xe5 informasjonsb\xe6rer for samtykket.'}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"f\xe5-tilgang",children:"F\xe5 tilgang"}),"\n",(0,r.jsxs)(n.p,{children:["F\xf8r du som konsument kan benytte Skatteetaten API-er som krever samtykke eller fullmakt m\xe5 du f\xe5 tilgang til Altinn's samtykkel\xf8sning. Altinn har beskrevet det som skal til for \xe5 ",(0,r.jsx)(n.a,{href:"https://altinn.github.io/docs/utviklingsguider/samtykke/datakonsument/komme-i-gang",children:"komme i gang med samtykke"}),". Skatteetaten er her datakilden og har p\xe5 forh\xe5nd opprettet ressurser for API-ene. N\xe6rmere informasjon om dette finner du i API-dokumentasjonen. Merk at Skatteetaten ikke benytter tjenesteeierstyrt rettighetsregister."]}),"\n",(0,r.jsx)(n.h2,{id:"be-om-samtykke",children:"Be om samtykke"}),"\n",(0,r.jsxs)(n.p,{children:["N\xe5r du har f\xe5tt tilgang til Altinn's samtykkel\xf8sning og API-et til Skatteetaten kan det ",(0,r.jsx)(n.a,{href:"https://altinn.github.io/docs/utviklingsguider/samtykke/datakonsument/be-om-samtykke",children:"bes om samtykke"}),". Skatteetaten st\xf8tter kun ",(0,r.jsx)(n.em,{children:"Forh\xe5ndsregistrerte samtykkeforesp\xf8rsler"})," og det er heller ikke mulig \xe5 overstyre de forh\xe5ndsdefinerte tekstene. ",(0,r.jsx)(n.em,{children:"Request Message"})," skal derfor ikke benyttes i foresp\xf8rselen."]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.a,{target:"_blank","data-noBrokenLinkCheck":!0,href:t(8662).A+"",children:(0,r.jsx)(n.img,{alt:"illustrasjon av samtykkeprosessen",src:t(54850).A+"",width:"1249",height:"676"})})}),"\n",(0,r.jsx)(n.p,{children:"Den overordnetete flyten for samtykkedialogen blir da som f\xf8lger:"}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:"Bruker logger seg p\xe5 nettl\xf8sningen for \xe5 f.eks. s\xf8ke om l\xe5n eller se sine Krav og betalinger. Konsumenter m\xe5 dermed ha et samtykke eller fullmakt for \xe5 innhente opplysninger p\xe5 vegne av brukeren."}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:["Konsument innhenter samtykket ved \xe5 sende en samtykkeforesp\xf8rsel for bruker til Digdir. Dersom det allerede foreligger et gyldig samtykke som er innenfor utl\xf8pstiden (f.eks. 90 dager for ",(0,r.jsx)(n.em,{children:"Krav og betalinger"}),"), fortsetter flyten i steg 6."]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:"Konsument sender deretter brukeren til samtykkesiden hos Altinn."}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:"Brukeren blir presentert for samtykkesiden som inneholder en beskrivelse av hva det skal gis samtykke til. Det er Skatteetaten som har definert dette innholdet."}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:"Brukeren gir samtykke og sendes tilbake til konsumentens nettsider."}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:"Konsumenter hentet et token fra Digdir (Maskinportentoken i Altinn 3 eller samtykketoken i Altinn 2). Samtykketokenet har vanligvis utl\xf8pstid p\xe5 30 sekunder, men kan innhentes p\xe5 nytt s\xe5 lenge samtykket fortsatt er gyldig."}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:"Konsument sender med tokenet i foresp\xf8rslene til API-et."}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:"Skatteetaten sjekker tokenet og utleverer dataene."}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(s,{children:(0,r.jsxs)(n.p,{children:["Samtykkedialogen kan ikke innpakkes i en iFrame eller annen branding som er egnet til \xe5 utydeliggj\xf8re domenet samtykkedialogen foreg\xe5r p\xe5 (som er altinn + idporten). Dette er begrunnet med et potensielt misbruksscenario beskrevet i ",(0,r.jsx)(n.a,{href:"https://tools.ietf.org/html/draft-ietf-oauth-v2-23#section-10.13",children:"OAuth2-spesifikasjonen"})," (clickjacking)"]})}),"\n",(0,r.jsx)(n.h2,{id:"fjerne-samtykke",children:"Fjerne samtykke"}),"\n",(0,r.jsxs)(n.p,{children:["En bruker kan ogs\xe5 ",(0,r.jsx)(n.a,{href:"https://info.altinn.no/hjelp/profil/samtykke/",children:"fjerne et samtykke"}),", og dette gj\xf8res p\xe5 brukerens profil i Altinn."]}),"\n",(0,r.jsx)(n.h2,{id:"tjenester-med-st\xf8tte-for-samtykke",children:"Tjenester med st\xf8tte for samtykke"}),"\n",(0,r.jsx)(n.p,{children:"F\xf8lgende API-er hos Skatteetaten st\xf8tter utlevering gjennom samtykke eller fullmakt for enkelte rettighetspakker. Detaljer om parameterne som er n\xf8dvendig for \xe5 f\xe5 utstedt samtykker eller fullmakt er beskrevet i dokumentasjonen for hvert enkelt api."}),"\n",(0,r.jsx)(n.p,{children:"Samtykke fra skatteyter:"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.a,{href:"/api-dokumentasjon/en/api/inntekt",children:"Inntekt API"})}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.a,{href:"/api-dokumentasjon/en/api/summertskattegrunnlag",children:"Summert skattegrunnlag API"})}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:"Samtykke fra virksomhet:"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.a,{href:"/api-dokumentasjon/en/api/kravogbetalinger",children:"Krav og betalinger API"})}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.a,{href:"/api-dokumentasjon/en/api/arbeidsgiveravgift",children:"Arbeidsgiveravgift API"})}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.a,{href:"/api-dokumentasjon/en/api/mva_meldingsopplysning",children:"Mva meldingsopplysning API"})}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.a,{href:"/api-dokumentasjon/en/api/oppdragutenlandskevirksomheter",children:"Oppdrag utenlanske virksomheter API"})}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.a,{href:"/api-dokumentasjon/en/api/restanser",children:"Restanser API"})}),"\n"]}),"\n",(0,r.jsxs)(n.p,{children:["Se egen dokumentasjon for ",(0,r.jsx)(n.a,{href:"/api-dokumentasjon/en/test/testavsamtykke",children:"hvordan teste med samtykke"}),"."]})]})}function m(e={}){const{wrapper:n}={...(0,i.R)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(d,{...e})}):d(e)}function h(e,n){throw new Error("Expected "+(n?"component":"object")+" `"+e+"` to be defined: you likely forgot to import, pass, or provide it.")}},8662:(e,n,t)=>{t.d(n,{A:()=>s});const s=t.p+"assets/files/samtykke-30129d9cf8a5f23caed1f5596aa7d6e4.png"},54850:(e,n,t)=>{t.d(n,{A:()=>s});const s=t.p+"assets/images/samtykke-30129d9cf8a5f23caed1f5596aa7d6e4.png"},28453:(e,n,t)=>{t.d(n,{R:()=>a,x:()=>o});var s=t(96540);const r={},i=s.createContext(r);function a(e){const n=s.useContext(i);return s.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function o(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:a(e.components),s.createElement(i.Provider,{value:n},e.children)}}}]);