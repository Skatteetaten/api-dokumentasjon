"use strict";(self.webpackChunkapi_dokumentasjon=self.webpackChunkapi_dokumentasjon||[]).push([[3102],{36862:(e,r,t)=>{t.r(r),t.d(r,{assets:()=>d,contentTitle:()=>o,default:()=>m,frontMatter:()=>a,metadata:()=>n,toc:()=>l});const n=JSON.parse('{"id":"om/sikkerhet","title":"Sikkerhet","description":"Informasjon om n\xf8dvendige sikkerhetsmekanismer, autentisering og autorisasjon.","source":"@site/docs/om/sikkerhet.md","sourceDirName":"om","slug":"/om/sikkerhet","permalink":"/api-dokumentasjon/en/om/sikkerhet","draft":false,"unlisted":false,"tags":[{"inline":true,"label":"Sikkerhet","permalink":"/api-dokumentasjon/en/tags/sikkerhet"},{"inline":true,"label":"Maskinporten","permalink":"/api-dokumentasjon/en/tags/maskinporten"},{"inline":true,"label":"Delegering","permalink":"/api-dokumentasjon/en/tags/delegering"}],"version":"current","frontMatter":{"title":"Sikkerhet","slug":"/om/sikkerhet","folder":"om","sidebar":"mydoc_sidebar","datatable":true,"tags":["Sikkerhet","Maskinporten","Delegering"],"keywords":["security","sikkerhet"],"last_updated":"Feb 9, 2026","hide_table_of_contents":true},"sidebar":"docs","previous":{"title":"Samtykke","permalink":"/api-dokumentasjon/en/om/samtykke"},"next":{"title":"Skjerming av data","permalink":"/api-dokumentasjon/en/om/skjerming"}}');var i=t(74848),s=t(28453);const a={title:"Sikkerhet",slug:"/om/sikkerhet",folder:"om",sidebar:"mydoc_sidebar",datatable:!0,tags:["Sikkerhet","Maskinporten","Delegering"],keywords:["security","sikkerhet"],last_updated:"Feb 9, 2026",hide_table_of_contents:!0},o=void 0,d={},l=[{value:"Maskinporten",id:"maskinporten",level:2},{value:"Ta kontakt med Digitaliseringsdirektoratet for \xe5 f\xe5 tilgang til Maskinporten",id:"ta-kontakt-med-digitaliseringsdirektoratet-for-\xe5-f\xe5-tilgang-til-maskinporten",level:3},{value:"Klargj\xf8ring fra Skatteetaten",id:"klargj\xf8ring-fra-skatteetaten",level:3},{value:"Klargj\xf8ring fra Virksomheten",id:"klargj\xf8ring-fra-virksomheten",level:3},{value:"Bruke Skatteetatens API-er med token fra Maskinporten",id:"bruke-skatteetatens-api-er-med-token-fra-maskinporten",level:3},{value:"Delegere rettigheter i Altinn",id:"delegere-rettigheter-i-altinn",level:3},{value:"Systemtilgang med systembruker",id:"systemtilgang-med-systembruker",level:3},{value:"Brannmur",id:"brannmur",level:2},{value:"Adresser det m\xe5 \xe5pnes for",id:"adresser-det-m\xe5-\xe5pnes-for",level:3}];function k(e){const r={a:"a",code:"code",h2:"h2",h3:"h3",li:"li",ol:"ol",p:"p",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",...(0,s.R)(),...e.components},{Summary:t}=r;return t||function(e,r){throw new Error("Expected "+(r?"component":"object")+" `"+e+"` to be defined: you likely forgot to import, pass, or provide it.")}("Summary",!0),(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(t,{children:"Informasjon om n\xf8dvendige sikkerhetsmekanismer, autentisering og autorisasjon."}),"\n",(0,i.jsx)(r.h2,{id:"maskinporten",children:"Maskinporten"}),"\n",(0,i.jsxs)(r.p,{children:["Alle Skatteetatens eksterne API-er benytter ",(0,i.jsx)(r.a,{href:"https://samarbeid.digdir.no/maskinporten/maskinporten/25",children:"Maskinporten fra Digdir"})," for autentisering av virksomheter for maskin-til-maskin grensesnitt. Autentisering basert p\xe5 kun virksomhetsertifikat st\xf8ttes ikke lenger."]}),"\n",(0,i.jsx)(r.p,{children:"Digitaliseringsdirektoratet har beskrevet hvordan API-sikring med Maskinporten gj\xf8res. Vi anbefaler alle virksomheter \xe5 sette seg godt inn i dette rammeverket. For \xe5 komme i gang med testing m\xe5 det gj\xf8res noen forberedelser hos virksomheten."}),"\n",(0,i.jsx)(r.h3,{id:"ta-kontakt-med-digitaliseringsdirektoratet-for-\xe5-f\xe5-tilgang-til-maskinporten",children:"Ta kontakt med Digitaliseringsdirektoratet for \xe5 f\xe5 tilgang til Maskinporten"}),"\n",(0,i.jsxs)(r.p,{children:["Bestill tilknytning til Maskinporten via ",(0,i.jsx)(r.a,{href:"https://samarbeid.digdir.no/",children:"Digdir samarbeidsportal"})]}),"\n",(0,i.jsx)(r.h3,{id:"klargj\xf8ring-fra-skatteetaten",children:"Klargj\xf8ring fra Skatteetaten"}),"\n",(0,i.jsx)(r.p,{children:"S\xe5 snart korrekt API og rettighetspakke for virksomheten er avklart, vil Skatteetaten melde inn virksomhetens organisasjonsnummer og tilgangen hos Digitaliseringsdirektoratet."}),"\n",(0,i.jsx)(r.h3,{id:"klargj\xf8ring-fra-virksomheten",children:"Klargj\xf8ring fra Virksomheten"}),"\n",(0,i.jsxs)(r.p,{children:["N\xe5r virksomheten har f\xe5tt beskjed at tilgangen (scopet) er opprettet i Maskinporten m\xe5 tilgangen provisjoneres fra den klienten virksomheten skal benytte for \xe5 hente data. Dette gj\xf8res ved \xe5 oppdatere Oauth2 klienten som skal ha tilgangen med det nye scopet, via ",(0,i.jsx)(r.a,{href:"https://docs.digdir.no/oidc_api_admin_maskinporten",children:"ID-porten sitt API for selvbetjening av integrasjoner"})," eller via et brukergrensesnitt i samarbeidsportalen. All kommunikasjon mot Maskinporten er sikret med \"server-to-server oauth2\" med bruk av virksomhetssertifikat. For test trenger man et testsertifikat av typen 'signering'. N\xe5r dette er gjort kan man begynne \xe5 bruke skatteetatatens API-er."]}),"\n",(0,i.jsx)(r.h3,{id:"bruke-skatteetatens-api-er-med-token-fra-maskinporten",children:"Bruke Skatteetatens API-er med token fra Maskinporten"}),"\n",(0,i.jsxs)(r.p,{children:['All kommunikasjon mellom virksomheten, Maskinporten og Skatteetaten gj\xf8res over HTTPS (TLS). Bruk av REST-API-er hos Maskinporten er sikret med "server-to-server oauth2", se mer informasjon om dette her: ',(0,i.jsx)(r.a,{href:"https://docs.digdir.no/oidc_auth_server-to-server-oauth2",children:"Digidr oauth2"}),"."]}),"\n",(0,i.jsx)(r.p,{children:(0,i.jsx)(r.strong,{children:"Overordnet gj\xf8res f\xf8lgende:"})}),"\n",(0,i.jsxs)(r.ol,{children:["\n",(0,i.jsxs)(r.li,{children:["F\xf8rst gj\xf8res et kall til Maskinporten for \xe5 f\xe5 et token som kan brukes mot Skatteetaten. Fremgangsm\xe5ten er beskrevet p\xe5 ",(0,i.jsx)(r.a,{href:"https://docs.digdir.no/docs/Maskinporten/maskinporten_guide_apikonsument#bruke-delegering-som-konsument",children:"Digdir sine side for hvordan bruke Maskinporten som konsument"}),'. Merk at "Resource" er valgfri og skal ikke settes for Skatteetatens API. Dette medf\xf8rer at audience blir "unspecified" - som Skatteetaten forventer.']}),"\n",(0,i.jsxs)(r.li,{children:['Tokenet legges ved kallet i "Authorization"-headeren slik: ',(0,i.jsx)(r.code,{children:"Authorization: Bearer <token>"})]}),"\n",(0,i.jsx)(r.li,{children:"Skatteetaten validerer tokenet og at virksomheten har rett til den informasjonen de pr\xf8ver \xe5 hente (tilgangskontroll)."}),"\n",(0,i.jsx)(r.li,{children:"Hvis alt er OK returneres data iht. foresp\xf8rselen."}),"\n"]}),"\n",(0,i.jsx)(r.h3,{id:"delegere-rettigheter-i-altinn",children:"Delegere rettigheter i Altinn"}),"\n",(0,i.jsxs)(r.p,{children:["Se egen side for informasjon om ",(0,i.jsx)(r.a,{href:"/api-dokumentasjon/en/om/delegering",children:"hvordan opptre p\xe5 vegne av en annen virksomhet"}),"."]}),"\n",(0,i.jsx)(r.h3,{id:"systemtilgang-med-systembruker",children:"Systemtilgang med systembruker"}),"\n",(0,i.jsxs)(r.p,{children:["Se egen side for informasjon om ",(0,i.jsx)(r.a,{href:"/api-dokumentasjon/en/om/systembruker",children:"systemtilgang for systembruker"}),"."]}),"\n",(0,i.jsx)(r.h2,{id:"brannmur",children:"Brannmur"}),"\n",(0,i.jsx)(r.p,{children:"Hvis man kaller tjenestene fra bak en utg\xe5ende brannmur m\xe5 man lage \xe5pninger i brannmuren sin."}),"\n",(0,i.jsx)(r.h3,{id:"adresser-det-m\xe5-\xe5pnes-for",children:"Adresser det m\xe5 \xe5pnes for"}),"\n",(0,i.jsx)(r.p,{children:"Vi anbefaler at brannmur\xe5pninger for trafikk mot Skatteetatens blabla API-er baseres p\xe5 FQDN/hostname (hostbasert \xe5pning), ikke p\xe5 IP-adresser."}),"\n",(0,i.jsx)(r.p,{children:"Skatteetaten forbereder en overgang til skyplattform for API-ene for deling. I denne forbindelse gj\xf8r vi oppmerksom p\xe5 at det ikke lenger er mulig \xe5 garantere stabile og statiske IP-adresser over tid. Av driftsmessige og tekniske \xe5rsaker er det ikke mulig \xe5 garantere stabile IP-adresser over tid. IP-adresser kan endres ved normal drift, for eksempel ved failover, skalering, vedlikehold eller endringer i underliggende infrastruktur."}),"\n",(0,i.jsx)(r.p,{children:"URL-er/hostnavn vil v\xe6re stabile og endringer varsles p\xe5 forh\xe5nd. IP-adresser holdes stabile i den grad det er mulig, men endringer kan forekomme under normal drift vil da ikke forh\xe5ndsvarsles."}),"\n",(0,i.jsx)(r.p,{children:'Der man likevel \xf8nsker \xe5 \xe5pne for IP-adresser i brannmur er det adressene i tabellen under som er gjeldende. Alle API-er som er under "api.skatteetaten.no" eller "api.skatteetaten-test.no" vil kunne ha IPer som endres. Mulig endring av IPer er normal teknisk drift som kan skje under failover eller andre tekniske grunner, s\xe5 tabellen under er best effort.'}),"\n",(0,i.jsxs)(r.table,{children:[(0,i.jsx)(r.thead,{children:(0,i.jsxs)(r.tr,{children:[(0,i.jsx)(r.th,{children:"Milj\xf8"}),(0,i.jsx)(r.th,{children:"Host"}),(0,i.jsx)(r.th,{children:"IPv4"}),(0,i.jsx)(r.th,{children:"IPv6"})]})}),(0,i.jsxs)(r.tbody,{children:[(0,i.jsxs)(r.tr,{children:[(0,i.jsx)(r.td,{children:"Test"}),(0,i.jsx)(r.td,{children:"*.api.skatteetaten-test.no"}),(0,i.jsxs)(r.td,{children:["20.100.51.138/32 ",(0,i.jsx)("br",{}),"51.13.43.236/32 ",(0,i.jsx)("br",{}),"159.216.17.128/27"]}),(0,i.jsx)(r.td,{children:"2a13:6201::/32"})]}),(0,i.jsxs)(r.tr,{children:[(0,i.jsx)(r.td,{children:"Prod"}),(0,i.jsx)(r.td,{children:"*.api.skatteetaten.no"}),(0,i.jsxs)(r.td,{children:["51.13.21.170/32 ",(0,i.jsx)("br",{}),"51.13.39.98/32 ",(0,i.jsx)("br",{}),"159.216.17.160/28"]}),(0,i.jsx)(r.td,{children:"2a13:6200::/32"})]})]})]})]})}function m(e={}){const{wrapper:r}={...(0,s.R)(),...e.components};return r?(0,i.jsx)(r,{...e,children:(0,i.jsx)(k,{...e})}):k(e)}},28453:(e,r,t)=>{t.d(r,{R:()=>a,x:()=>o});var n=t(96540);const i={},s=n.createContext(i);function a(e){const r=n.useContext(s);return n.useMemo((function(){return"function"==typeof e?e(r):{...r,...e}}),[r,e])}function o(e){let r;return r=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:a(e.components),n.createElement(s.Provider,{value:r},e.children)}}}]);