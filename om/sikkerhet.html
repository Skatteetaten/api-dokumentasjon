<!doctype html>
<html lang="nb" dir="ltr" class="docs-wrapper docs-doc-page docs-version-current plugin-docs plugin-id-default docs-doc-id-om/sikkerhet">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v2.3.1">
<title data-rh="true">Sikkerhet | API-dokumentasjon</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="https://skatteetaten.github.io/api-dokumentasjon/om/sikkerhet"><meta data-rh="true" name="docusaurus_locale" content="nb"><meta data-rh="true" name="docsearch:language" content="nb"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="Sikkerhet | API-dokumentasjon"><meta data-rh="true" name="description" content="Informasjon om nødvendige sikkerhetsmekanismer, autentisering og autorisasjon."><meta data-rh="true" property="og:description" content="Informasjon om nødvendige sikkerhetsmekanismer, autentisering og autorisasjon."><meta data-rh="true" name="keywords" content="security,sikkerhet"><link data-rh="true" rel="icon" href="/api-dokumentasjon/img/favicon.png"><link data-rh="true" rel="canonical" href="https://skatteetaten.github.io/api-dokumentasjon/om/sikkerhet"><link data-rh="true" rel="alternate" href="https://skatteetaten.github.io/api-dokumentasjon/om/sikkerhet" hreflang="nb"><link data-rh="true" rel="alternate" href="https://skatteetaten.github.io/api-dokumentasjon/om/sikkerhet" hreflang="x-default"><link rel="alternate" type="application/atom+xml" href="/api-dokumentasjon/nyheter-og-driftsvarsler/atom.xml" title="Skatteetaten - API varsel Atom Feed"><link rel="stylesheet" href="/api-dokumentasjon/assets/css/styles.ec3a38e6.css">
<link rel="preload" href="/api-dokumentasjon/assets/js/runtime~main.bb1c0c0a.js" as="script">
<link rel="preload" href="/api-dokumentasjon/assets/js/main.9052ebef.js" as="script">
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div dir="ltr" class="body-90"><div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#docusaurus_skipToContent_fallback">Skip to main content</a></div><div id="docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0 docsWrapper_BCFX"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docPage__5DB"><aside class="theme-doc-sidebar-container docSidebarContainer_b6E3"><div class="sidebarViewport_Xe31"><div class="sidebar_njMd"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" aria-expanded="true" href="/api-dokumentasjon/">Om</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/api-dokumentasjon/">Kom i gang</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/api-dokumentasjon/om/bruk">Bruk av tjenestene</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/api-dokumentasjon/om/delegering">Delegere rettigheter i Altinn</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/api-dokumentasjon/om/feil">Feil</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/api-dokumentasjon/om/rettighetspakker">Rettighetspakker</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/api-dokumentasjon/om/samtykke">Samtykke</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/api-dokumentasjon/om/sikkerhet">Sikkerhet</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/api-dokumentasjon/om/skjerming">Skjerming av data</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/api-dokumentasjon/om/tekniskspesifikasjon">Teknisk spesifikasjon</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/api-dokumentasjon/om/versjoner">Versjoner</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/api-dokumentasjon/api/aktivkonto">API&#x27;er</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/api-dokumentasjon/test/tenor">Test</a></div></li></ul></nav></div></div></aside><main class="docMainContainer_gTbr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/api-dokumentasjon/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">Om</span><meta itemprop="position" content="1"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">Sikkerhet</span><meta itemprop="position" content="2"></li></ul></nav><div class="theme-doc-markdown markdown"><header><h1>Sikkerhet</h1></header><div class="summary_ZwcQ">Informasjon om nødvendige sikkerhetsmekanismer, autentisering og autorisasjon.</div><h2 class="anchor anchorWithStickyNavbar_LWe7" id="maskinporten">Maskinporten<a href="#maskinporten" class="hash-link" aria-label="Direct link to heading" title="Direct link to heading">​</a></h2><p>Alle Skatteetatens delingstjenester benytter Maskinporten for autentisering av virksomheter for maskin-til-maskin grensesnitt. Autentisering basert på kun virksomhetsertifikat støttes ikke lenger.</p><p>Digitaliseringsdirektoratet har beskrevet hvordan API-sikring med Maskinporten gjøres. Vi anbefaler alle virksomheter å sette seg godt inn i dette rammeverket. For å komme i gang med testing må det gjøres noen forberedelser hos virksomheten.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="ta-kontakt-med-digitaliseringsdirektoratet-for-å-få-tilgang-til-maskinporten">Ta kontakt med Digitaliseringsdirektoratet for å få tilgang til Maskinporten<a href="#ta-kontakt-med-digitaliseringsdirektoratet-for-å-få-tilgang-til-maskinporten" class="hash-link" aria-label="Direct link to heading" title="Direct link to heading">​</a></h3><p>Bestill tilknytning til Maskinporten via </p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="klargjøring-fra-skatteetaten">Klargjøring fra Skatteetaten<a href="#klargjøring-fra-skatteetaten" class="hash-link" aria-label="Direct link to heading" title="Direct link to heading">​</a></h3><p>Så snart korrekt tjeneste og rettighetspakke for virksomheten er avklart, vil Skatteetaten melde inn virksomhetens organisasjonsnummer og tilgangen hos Digitaliseringsdirektoratet. </p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="klargjøring-fra-virksomheten">Klargjøring fra Virksomheten<a href="#klargjøring-fra-virksomheten" class="hash-link" aria-label="Direct link to heading" title="Direct link to heading">​</a></h3><p>Når virksomheten har fått beskjed at tilgangen (scopet) er opprettet i Maskinporten må tilgangen provisjoneres fra den klienten virksomheten skal benytte for å hente data. Dette gjøres ved å oppdatere Oauth2 klienten som skal ha tilgangen med det nye scopet, via <!-- --> eller via et brukergrensesnitt i samarbeidsportalen. All kommunikasjon mot Maskinporten er sikret med &quot;server-to-server oauth2&quot; med bruk av virksomhetssertifikat. For test trenger man et testsertifikat av typen &#x27;signering&#x27;. Når dette er gjort kan man begynne å bruke skatteetatatens api&#x27;er.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="bruke-skatteetatens-apier-med-token-fra-maskinporten">Bruke Skatteetatens api&#x27;er med token fra Maskinporten<a href="#bruke-skatteetatens-apier-med-token-fra-maskinporten" class="hash-link" aria-label="Direct link to heading" title="Direct link to heading">​</a></h3><p>All kommunikasjon mellom virksomheten, Maskinporten og Skatteetaten gjøres over HTTPS (TLS). Bruk av REST-api&#x27;er hos Maskinporten er sikret med &quot;server-to-server oauth2&quot;, se mer informasjon om dette her: <!-- -->.</p><p><strong>Overordnet gjøres følgende:</strong></p><ol><li>Først gjøres et kall til Maskinporten for å få et token som kan brukes mot Skatteetaten. Fremgangsmåten er beskrevet på <!-- -->. Merk at &quot;Resource&quot; er valgfri og skal ikke settes for Skatteetatens API. Dette medfører at audience blir &quot;unspecified&quot; - som Skatteetaten forventer.</li><li>Tokenet legges ved kallet i &quot;Authorization&quot;-headeren slik: <code>Authorization: Bearer &lt;token&gt;</code></li><li>Skatteetaten validerer tokenet og at virksomheten har rett til den informasjonen de prøver å hente (tilgangskontroll).</li><li>Hvis alt er OK returneres data iht. forespørselen.</li></ol><h3 class="anchor anchorWithStickyNavbar_LWe7" id="delegere-rettigheter-i-altinn">Delegere rettigheter i Altinn<a href="#delegere-rettigheter-i-altinn" class="hash-link" aria-label="Direct link to heading" title="Direct link to heading">​</a></h3><p>Se egen side for informasjon om <!-- -->.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="brannmur">Brannmur<a href="#brannmur" class="hash-link" aria-label="Direct link to heading" title="Direct link to heading">​</a></h2><p>Hvis man kaller delingstjenestene fra bak en utgående brannmur må man lage åpninger i brannmuren sin.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="adresser-det-må-åpnes-for">Adresser det må åpnes for<a href="#adresser-det-må-åpnes-for" class="hash-link" aria-label="Direct link to heading" title="Direct link to heading">​</a></h3><table><thead><tr><th>Miljø</th><th>Host</th><th>IP</th><th>Port</th></tr></thead><tbody><tr><td>Test</td><td>api-test.sits.no</td><td>159.216.17.148</td><td>443</td></tr><tr><td>Produksjon</td><td>api.skatteetaten.no</td><td>159.216.17.168</td><td>443</td></tr></tbody></table><p>Vi forsøker å holde IP statisk, men kan ikke love at det aldri vil komme endringer.
Hvis vi må gjøre endringer vil dette bli varslet som en <!-- -->.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="subnett">Subnett<a href="#subnett" class="hash-link" aria-label="Direct link to heading" title="Direct link to heading">​</a></h3><p>Hvis man heller ønsker et brannmur oppsett som ikke vil kreve endringer så kan man åpne mot hele Skatteetaten sitt subnett for eksterne.
Dette innebærer at man åpner mot alle eksternt rettede tjenester Skatteetaten tilbyr (som for eksempel folkeregisteret).</p><table><thead><tr><th>Miljø</th><th>Subnett</th><th>Port</th></tr></thead><tbody><tr><td>Preprod miljø (Test++)</td><td>159.216.17.128/27</td><td>443</td></tr><tr><td>Produksjon (Prod)</td><td>159.216.17.160/28</td><td>443</td></tr></tbody></table></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="theme-doc-footer-tags-row row margin-bottom--sm"><div class="col"><b>Tags:</b><ul class="tags_jXut padding--none margin-left--sm"><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/api-dokumentasjon/tags/sikkerhet">Sikkerhet</a></li><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/api-dokumentasjon/tags/maskinporten">Maskinporten</a></li><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/api-dokumentasjon/tags/delegering">Delegering</a></li></ul></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages navigation"><a class="pagination-nav__link pagination-nav__link--prev" href="/api-dokumentasjon/om/samtykke"><div class="pagination-nav__sublabel">Forrige</div><div class="pagination-nav__label">Samtykke</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/api-dokumentasjon/om/skjerming"><div class="pagination-nav__sublabel">Neste</div><div class="pagination-nav__label">Skjerming av data</div></a></nav></div></div></div></div></main></div></div></div></div>
<script src="/api-dokumentasjon/assets/js/runtime~main.bb1c0c0a.js"></script>
<script src="/api-dokumentasjon/assets/js/main.9052ebef.js"></script>
</body>
</html>