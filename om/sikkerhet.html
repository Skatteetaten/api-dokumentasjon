<!doctype html>
<html lang="nb" dir="ltr" class="docs-wrapper plugin-docs plugin-id-default docs-version-current docs-doc-page docs-doc-id-om/sikkerhet" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.6.3">
<title data-rh="true">Sikkerhet | API-dokumentasjon</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="https://skatteetaten.github.io/api-dokumentasjon/om/sikkerhet"><meta data-rh="true" property="og:locale" content="nb"><meta data-rh="true" property="og:locale:alternate" content="en"><meta data-rh="true" name="docusaurus_locale" content="nb"><meta data-rh="true" name="docsearch:language" content="nb"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="Sikkerhet | API-dokumentasjon"><meta data-rh="true" name="description" content="Informasjon om nødvendige sikkerhetsmekanismer, autentisering og autorisasjon."><meta data-rh="true" property="og:description" content="Informasjon om nødvendige sikkerhetsmekanismer, autentisering og autorisasjon."><meta data-rh="true" name="keywords" content="security,sikkerhet"><link data-rh="true" rel="icon" href="/api-dokumentasjon/img/favicon.png"><link data-rh="true" rel="canonical" href="https://skatteetaten.github.io/api-dokumentasjon/om/sikkerhet"><link data-rh="true" rel="alternate" href="https://skatteetaten.github.io/api-dokumentasjon/om/sikkerhet" hreflang="nb"><link data-rh="true" rel="alternate" href="https://skatteetaten.github.io/api-dokumentasjon/en/om/sikkerhet" hreflang="en"><link data-rh="true" rel="alternate" href="https://skatteetaten.github.io/api-dokumentasjon/om/sikkerhet" hreflang="x-default"><link rel="alternate" type="application/atom+xml" href="/api-dokumentasjon/nyheter-og-driftsvarsler/atom.xml" title="Skatteetaten - API nyheter Atom Feed"><link rel="stylesheet" href="/api-dokumentasjon/assets/css/styles.a66604ee.css">
<script src="/api-dokumentasjon/assets/js/runtime~main.17c36a50.js" defer="defer"></script>
<script src="/api-dokumentasjon/assets/js/main.41a0a33c.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return window.localStorage.getItem("theme")}catch(t){}}();t(null!==e?e:"light")}(),function(){try{const n=new URLSearchParams(window.location.search).entries();for(var[t,e]of n)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id="__docusaurus"><div dir="ltr" class="body-98"><div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><div id="__docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0"><div class="docsWrapper_hBAB"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docRoot_UBD9"><aside class="theme-doc-sidebar-container docSidebarContainer_YfHR"><div class="sidebarViewport_aRkj"><div class="sidebar_njMd"><nav aria-label="Dokumenter sidefelt" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" role="button" aria-expanded="true" href="/api-dokumentasjon/">Om</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/api-dokumentasjon/">Kom i gang</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/api-dokumentasjon/om/bruk">Bruk av API-er for deling</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/api-dokumentasjon/om/delegering">Delegere rettigheter i Altinn</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/api-dokumentasjon/om/feil">Feil</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/api-dokumentasjon/om/rettighetspakker">Rettighetspakker</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/api-dokumentasjon/om/samtykke">Samtykke</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/api-dokumentasjon/om/sikkerhet">Sikkerhet</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/api-dokumentasjon/om/skjerming">Skjerming av data</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/api-dokumentasjon/om/systembruker">Systembruker</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/api-dokumentasjon/om/tekniskspesifikasjon">Teknisk spesifikasjon</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/api-dokumentasjon/om/varsler">Varsler</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/api-dokumentasjon/om/versjoner">Versjoner</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/api-dokumentasjon/api/aksjebeholdning">API-er for deling</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/api-dokumentasjon/api/innrapportering-aksjonaerregisteroppgave">API-er for innrapportering</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/api-dokumentasjon/anvendelsesomraader/aordningen">Anvendelsesområder</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/api-dokumentasjon/test/tenor">Test</a></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/api-dokumentasjon/kontaktoss">Kontakt oss</a></li></ul></nav></div></div></aside><main class="docMainContainer_TBSr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/api-dokumentasjon/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">Om</span><meta itemprop="position" content="1"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">Sikkerhet</span><meta itemprop="position" content="2"></li></ul></nav><div class="theme-doc-markdown markdown"><header><h1>Sikkerhet</h1></header><div class="summary_ZwcQ">Informasjon om nødvendige sikkerhetsmekanismer, autentisering og autorisasjon.</div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="maskinporten">Maskinporten<a href="#maskinporten" class="hash-link" aria-label="Direct link to heading" title="Direct link to heading">​</a></h2>
<p>Alle Skatteetatens eksterne API-er benytter <a href="https://samarbeid.digdir.no/maskinporten/maskinporten/25" target="_blank" rel="noopener noreferrer">Maskinporten fra Digdir</a> for autentisering av virksomheter for maskin-til-maskin grensesnitt. Autentisering basert på kun virksomhetsertifikat støttes ikke lenger.</p>
<p>Digitaliseringsdirektoratet har beskrevet hvordan API-sikring med Maskinporten gjøres. Vi anbefaler alle virksomheter å sette seg godt inn i dette rammeverket. For å komme i gang med testing må det gjøres noen forberedelser hos virksomheten.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="ta-kontakt-med-digitaliseringsdirektoratet-for-å-få-tilgang-til-maskinporten">Ta kontakt med Digitaliseringsdirektoratet for å få tilgang til Maskinporten<a href="#ta-kontakt-med-digitaliseringsdirektoratet-for-å-få-tilgang-til-maskinporten" class="hash-link" aria-label="Direct link to heading" title="Direct link to heading">​</a></h3>
<p>Bestill tilknytning til Maskinporten via <a href="https://samarbeid.digdir.no/" target="_blank" rel="noopener noreferrer">Digdir samarbeidsportal</a></p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="klargjøring-fra-skatteetaten">Klargjøring fra Skatteetaten<a href="#klargjøring-fra-skatteetaten" class="hash-link" aria-label="Direct link to heading" title="Direct link to heading">​</a></h3>
<p>Så snart korrekt API og rettighetspakke for virksomheten er avklart, vil Skatteetaten melde inn virksomhetens organisasjonsnummer og tilgangen hos Digitaliseringsdirektoratet.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="klargjøring-fra-virksomheten">Klargjøring fra Virksomheten<a href="#klargjøring-fra-virksomheten" class="hash-link" aria-label="Direct link to heading" title="Direct link to heading">​</a></h3>
<p>Når virksomheten har fått beskjed at tilgangen (scopet) er opprettet i Maskinporten må tilgangen provisjoneres fra den klienten virksomheten skal benytte for å hente data. Dette gjøres ved å oppdatere Oauth2 klienten som skal ha tilgangen med det nye scopet, via <a href="https://docs.digdir.no/oidc_api_admin_maskinporten" target="_blank" rel="noopener noreferrer">ID-porten sitt API for selvbetjening av integrasjoner</a> eller via et brukergrensesnitt i samarbeidsportalen. All kommunikasjon mot Maskinporten er sikret med &quot;server-to-server oauth2&quot; med bruk av virksomhetssertifikat. For test trenger man et testsertifikat av typen &#x27;signering&#x27;. Når dette er gjort kan man begynne å bruke skatteetatatens API-er.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="bruke-skatteetatens-api-er-med-token-fra-maskinporten">Bruke Skatteetatens API-er med token fra Maskinporten<a href="#bruke-skatteetatens-api-er-med-token-fra-maskinporten" class="hash-link" aria-label="Direct link to heading" title="Direct link to heading">​</a></h3>
<p>All kommunikasjon mellom virksomheten, Maskinporten og Skatteetaten gjøres over HTTPS (TLS). Bruk av REST-API-er hos Maskinporten er sikret med &quot;server-to-server oauth2&quot;, se mer informasjon om dette her: <a href="https://docs.digdir.no/oidc_auth_server-to-server-oauth2" target="_blank" rel="noopener noreferrer">Digidr oauth2</a>.</p>
<p><strong>Overordnet gjøres følgende:</strong></p>
<ol>
<li>Først gjøres et kall til Maskinporten for å få et token som kan brukes mot Skatteetaten. Fremgangsmåten er beskrevet på <a href="https://docs.digdir.no/docs/Maskinporten/maskinporten_guide_apikonsument#bruke-delegering-som-konsument" target="_blank" rel="noopener noreferrer">Digdir sine side for hvordan bruke Maskinporten som konsument</a>. Merk at &quot;Resource&quot; er valgfri og skal ikke settes for Skatteetatens API. Dette medfører at audience blir &quot;unspecified&quot; - som Skatteetaten forventer.</li>
<li>Tokenet legges ved kallet i &quot;Authorization&quot;-headeren slik: <code>Authorization: Bearer &lt;token&gt;</code></li>
<li>Skatteetaten validerer tokenet og at virksomheten har rett til den informasjonen de prøver å hente (tilgangskontroll).</li>
<li>Hvis alt er OK returneres data iht. forespørselen.</li>
</ol>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="delegere-rettigheter-i-altinn">Delegere rettigheter i Altinn<a href="#delegere-rettigheter-i-altinn" class="hash-link" aria-label="Direct link to heading" title="Direct link to heading">​</a></h3>
<p>Se egen side for informasjon om <a href="/api-dokumentasjon/om/delegering">hvordan opptre på vegne av en annen virksomhet</a>.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="systemtilgang-med-systembruker">Systemtilgang med systembruker<a href="#systemtilgang-med-systembruker" class="hash-link" aria-label="Direct link to heading" title="Direct link to heading">​</a></h3>
<p>Se egen side for informasjon om <a href="/api-dokumentasjon/om/systembruker">systemtilgang for systembruker</a>.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="brannmur">Brannmur<a href="#brannmur" class="hash-link" aria-label="Direct link to heading" title="Direct link to heading">​</a></h2>
<p>Hvis man kaller tjenestene fra bak en utgående brannmur må man lage åpninger i brannmuren sin.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="adresser-det-må-åpnes-for">Adresser det må åpnes for<a href="#adresser-det-må-åpnes-for" class="hash-link" aria-label="Direct link to heading" title="Direct link to heading">​</a></h3>
<p>Vi forsøker å holde IP statisk, men kan ikke love at det aldri vil komme endringer.
Hvis vi må gjøre endringer vil dette bli <a href="/api-dokumentasjon/om/varsler">varslet</a>.</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="nye-url-er">Nye URL-er<a href="#nye-url-er" class="hash-link" aria-label="Direct link to heading" title="Direct link to heading">​</a></h4>
<p>Det kan være at enkelte virksomheter må åpne i brannmurreglene sine. IP-range vil være:</p>
<table><thead><tr><th>Miljø</th><th>Host</th><th>IP</th></tr></thead><tbody><tr><td>Test</td><td>*.api.skatteetaten-test.no</td><td>20.100.51.138 / 2a13:6200:1065:13d:f5:52a2:e633:8625</td></tr><tr><td>Prod</td><td>*.api.skatteetaten.no</td><td>51.13.21.170 / 2a13:6201:1066:c63:f5:fc5f:3c74:30c0</td></tr></tbody></table>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="subnett">Subnett<a href="#subnett" class="hash-link" aria-label="Direct link to heading" title="Direct link to heading">​</a></h3>
<p>Hvis man heller ønsker et brannmur oppsett som ikke vil kreve endringer så kan man åpne mot hele Skatteetaten sitt subnett for eksterne.
Dette innebærer at man åpner mot alle eksternt rettede tjenester Skatteetaten tilbyr (som for eksempel folkeregisteret).</p>
<table><thead><tr><th>Miljø</th><th>Subnett</th><th>Port</th></tr></thead><tbody><tr><td>Preprod miljø (Test++)</td><td>159.216.17.128/27</td><td>443</td></tr><tr><td>Produksjon (Prod)</td><td>159.216.17.160/28</td><td>443</td></tr></tbody></table></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="row margin-top--sm theme-doc-footer-tags-row"><div class="col"><b>Tags:</b><ul class="tags_jXut padding--none margin-left--sm"><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/api-dokumentasjon/tags/sikkerhet">Sikkerhet</a></li><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/api-dokumentasjon/tags/maskinporten">Maskinporten</a></li><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/api-dokumentasjon/tags/delegering">Delegering</a></li></ul></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages navigation"><a class="pagination-nav__link pagination-nav__link--prev" href="/api-dokumentasjon/om/samtykke"><div class="pagination-nav__sublabel">Forrige</div><div class="pagination-nav__label">Samtykke</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/api-dokumentasjon/om/skjerming"><div class="pagination-nav__sublabel">Neste</div><div class="pagination-nav__label">Skjerming av data</div></a></nav></div></div></div></div></main></div></div></div></div></div>
</body>
</html>