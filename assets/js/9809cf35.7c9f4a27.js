"use strict";(self.webpackChunkapi_dokumentasjon=self.webpackChunkapi_dokumentasjon||[]).push([[4122],{80467:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>d,contentTitle:()=>a,default:()=>g,frontMatter:()=>l,metadata:()=>r,toc:()=>o});const r=JSON.parse('{"id":"api/trekkpaalegg","title":"Trekkp\xe5legg API","description":"Denne siden beskriver et nytt grensesnitt mellom IT-systemene til Skatteetaten og trekkpliktige/arbeidsgivere.","source":"@site/docs/api/trekkpaalegg.md","sourceDirName":"api","slug":"/api/trekkpaalegg","permalink":"/api-dokumentasjon/api/trekkpaalegg","draft":false,"unlisted":false,"tags":[{"inline":true,"label":"API","permalink":"/api-dokumentasjon/tags/api"},{"inline":true,"label":"Innkreving","permalink":"/api-dokumentasjon/tags/innkreving"}],"version":"current","frontMatter":{"title":"Trekkp\xe5legg API","slug":"/api/trekkpaalegg","folder":"api","sidebar":"mydoc_sidebar","datatable":true,"tags":["API","Innkreving"],"keywords":["trekkpaalegg","innkreving"],"last_updated":"Apr 11, 2025","hide_table_of_contents":true},"sidebar":"docs","previous":{"title":"Tjenestepensjonsavtale API","permalink":"/api-dokumentasjon/api/tjenestepensjonsavtale"},"next":{"title":"Underenhet fra A-ordningen API","permalink":"/api-dokumentasjon/api/underenhetaordningen"}}');var s=n(74848),i=n(28453);const l={title:"Trekkp\xe5legg API",slug:"/api/trekkpaalegg",folder:"api",sidebar:"mydoc_sidebar",datatable:!0,tags:["API","Innkreving"],keywords:["trekkpaalegg","innkreving"],last_updated:"Apr 11, 2025",hide_table_of_contents:!0},a=void 0,d={},o=[{value:"Beskrivelse:",id:"beskrivelse",level:3},{value:"Scope",id:"scope",level:2},{value:"Teknisk spesifikasjon",id:"teknisk-spesifikasjon",level:2},{value:"API Spesifikasjon",id:"api-spesifikasjon",level:2},{value:"Trekkp\xe5legg API",id:"trekkp\xe5legg-api",level:3},{value:"Hent alle gjeldende",id:"hent-alle-gjeldende",level:3},{value:"Parametre",id:"parametre",level:3},{value:"Retur type",id:"retur-type",level:3},{value:"Autorisasjon",id:"autorisasjon",level:3},{value:"HTTP request headere",id:"http-request-headere",level:3},{value:"Hent versjon",id:"hent-versjon",level:3},{value:"Parametre",id:"parametre-1",level:3},{value:"Retur type",id:"retur-type-1",level:3},{value:"Autorisasjon",id:"autorisasjon-1",level:3},{value:"HTTP request headere",id:"http-request-headere-1",level:3},{value:"Datakatalog",id:"datakatalog",level:2},{value:"Tilgang til tjenesten",id:"tilgang-til-tjenesten",level:2},{value:"Alternativ 1 - Systemleverand\xf8r er trekkpliktig",id:"alternativ-1---systemleverand\xf8r-er-trekkpliktig",level:3},{value:"Alternativ 2 - Systembruker",id:"alternativ-2---systembruker",level:3},{value:"Testoppsett",id:"testoppsett",level:3},{value:"Test uten bruk av systembruker (alternativ 1)",id:"test-uten-bruk-av-systembruker-alternativ-1",level:3},{value:"Test der systembruker benyttes (alternativ 2)",id:"test-der-systembruker-benyttes-alternativ-2",level:3},{value:"Krav til testgjennomf\xf8ring",id:"krav-til-testgjennomf\xf8ring",level:2},{value:"Oppsummering av test og oppstart i produksjon",id:"oppsummering-av-test-og-oppstart-i-produksjon",level:2},{value:"Testmilj\xf8",id:"testmilj\xf8",level:2},{value:"Testdata",id:"testdata",level:2},{value:"Oppsett av maskinport-integrasjon og eventuelt systembruker",id:"oppsett-av-maskinport-integrasjon-og-eventuelt-systembruker",level:2},{value:"Verifisere at du n\xe5r l\xf8sningen og be deretter om \xe5 f\xe5 opprettet testdata for trekkp\xe5legg",id:"verifisere-at-du-n\xe5r-l\xf8sningen-og-be-deretter-om-\xe5-f\xe5-opprettet-testdata-for-trekkp\xe5legg",level:2},{value:"Sjekkliste for L\xf8nns- og personalsystemleverand\xf8rer",id:"sjekkliste-for-l\xf8nns--og-personalsystemleverand\xf8rer",level:2},{value:"1. Forberedelser og avtaler",id:"1-forberedelser-og-avtaler",level:3},{value:"2. Tilgang og autentisering",id:"2-tilgang-og-autentisering",level:3},{value:"3. Testmilj\xf8 og testdata",id:"3-testmilj\xf8-og-testdata",level:3},{value:"4. Implementasjon og integrasjon",id:"4-implementasjon-og-integrasjon",level:3},{value:"5. Testing og verifisering",id:"5-testing-og-verifisering",level:3},{value:"6. Overgang til produksjon",id:"6-overgang-til-produksjon",level:3},{value:"7. Oppf\xf8lging",id:"7-oppf\xf8lging",level:3}];function k(e){const t={a:"a",code:"code",em:"em",h2:"h2",h3:"h3",img:"img",li:"li",p:"p",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,i.R)(),...e.components},{Summary:r,TabItem:l,Tabs:a}=t;return r||p("Summary",!0),l||p("TabItem",!0),a||p("Tabs",!0),(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(r,{children:" Denne siden beskriver et nytt grensesnitt mellom IT-systemene til Skatteetaten og trekkpliktige/arbeidsgivere."}),"\n",(0,s.jsxs)(a,{underline:!0,children:[(0,s.jsxs)(l,{headerText:"Om tjenesten",itemKey:"itemKey-1",default:!0,children:[(0,s.jsx)(t.p,{children:"M\xe5lgruppen for siden er utviklere og IT-arkitekter hos systemleverand\xf8rer som leverer l\xf8nns- og personalsystemer (eller\nsluttbrukersystemer) til arbeidsgivere. Slike systemer kalles i det videre sluttbrukersystemer og forkortes SBS.\nDet skal etableres et nytt grensesnitt for \xe5 formidle trekkp\xe5legg fra Skatteetaten til arbeidsgivere med ansatte som\nskal ha utleggstrekk i l\xf8nn."}),(0,s.jsxs)(t.p,{children:["Grensesnittet vil p\xe5 sikt erstatte det eksisterende grensesnittet for trekkformidling, men i f\xf8rste omgang vil det nye\ngrensesnittet komme i tillegg til det eksisterende grensesnittet. Grensesnittet vil f\xf8rst tilbys i et testmilj\xf8,\nderetter i piloter og til slutt i full produksjon.\nFiguren under viser arkitekturen: ",(0,s.jsx)(t.img,{alt:"Arkitektur",src:n(65868).A+"",width:"994",height:"660"})]}),(0,s.jsx)(t.h3,{id:"beskrivelse",children:"Beskrivelse:"}),(0,s.jsx)(t.p,{children:"Skatteetaten etablerer en ny utleggstrekksak og oppretter en JSON-melding om dette i utleggstrekk-API"}),(0,s.jsx)(t.p,{children:"Send informasjon om nytt trekkp\xe5legg til arbeidsgiver via Dialogporten\nArbeidsgiver henter trekkp\xe5legg fra Skatteetaten.\n2a SBS henter et systembrukertoken fra Maskinporten\n2b SBS utf\xf8rer kall (get) mot trekkp\xe5legg-API for \xe5 hente trekkp\xe5legg\nTrekkpliktig arbeidsgiver kan ogs\xe5 hente de samme trekkp\xe5leggene fra Altinn-innboksen i Digdirs Felles arbeidsflate. En slik l\xf8sning vil videref\xf8res ogs\xe5 i fremtiden.\nFor generell informasjon om tjenester fra Skatteetaten se egne sider om:"}),(0,s.jsxs)(t.ul,{children:["\n",(0,s.jsx)(t.li,{children:(0,s.jsx)(t.a,{href:"/api-dokumentasjon/om/sikkerhet",children:"Sikkerhetsmekansimer"})}),"\n",(0,s.jsx)(t.li,{children:(0,s.jsx)(t.a,{href:"/api-dokumentasjon/om/systembruker",children:"Systembruker"})}),"\n",(0,s.jsx)(t.li,{children:(0,s.jsx)(t.a,{href:"/api-dokumentasjon/om/feil",children:"Feilh\xe5ndtering"})}),"\n",(0,s.jsx)(t.li,{children:(0,s.jsx)(t.a,{href:"/api-dokumentasjon/om/versjoner",children:"Versjonering"})}),"\n",(0,s.jsx)(t.li,{children:(0,s.jsx)(t.a,{href:"/api-dokumentasjon/om/tekniskspesifikasjon",children:"Teknisk spesifikasjon"})}),"\n"]}),(0,s.jsx)(t.h2,{id:"scope",children:"Scope"}),(0,s.jsxs)(t.p,{children:["F\xf8lgende scope skal benyttes ved autentisering i Maskinporten: ",(0,s.jsx)(t.code,{children:"skatteetaten:trekkpaalegg"})]}),(0,s.jsx)(t.h2,{id:"teknisk-spesifikasjon",children:"Teknisk spesifikasjon"}),(0,s.jsxs)(t.p,{children:["URL-er til API-et, beskrivelsen av parameterne, endepunkter og respons ligger\ni ",(0,s.jsx)(t.a,{href:"https://app.swaggerhub.com/apis/skatteetaten/trekkpaalegg-app",children:"Open API spesifikasjonen"})," p\xe5 SwaggerHub."]}),(0,s.jsx)(t.p,{children:"Skatteetaten tilbyr API for \xe5 hente trekkp\xe5legg."}),(0,s.jsx)(t.p,{children:"Hovedtrekkene i det nye grensesnittet er:"}),(0,s.jsxs)(t.ul,{children:["\n",(0,s.jsx)(t.li,{children:"Grensesnittet er et maskin-maskin-grensesnitt som overf\xf8rer trekkp\xe5legg fra Skatteetaten til arbeidsgivere med\nSBS-systemer."}),"\n",(0,s.jsx)(t.li,{children:"Grensesnittet er basert p\xe5 en RESTful-stil som tilbyr et API."}),"\n",(0,s.jsx)(t.li,{children:"SBS m\xe5 sp\xf8rre (poll) mot grensesnittet for \xe5 sjekke om det er nye trekkp\xe5legg."}),"\n",(0,s.jsx)(t.li,{children:"Det vil etter hvert komme et grensesnitt der SBS kan motta notifikasjon (event) om at Skatteetaten har et nytt\ntrekkp\xe5legg til arbeidsgiver."}),"\n",(0,s.jsx)(t.li,{children:"I grensesnittet m\xe5 SBS presentere et token som inneholder organisasjonsnummeret til trekkpliktig arbeidsgiver."}),"\n",(0,s.jsx)(t.li,{children:'Tokenet f\xe5r SBS ved \xe5 koble seg opp mot Maskinporten med et gitt "scope".'}),"\n",(0,s.jsx)(t.li,{children:"Trekkp\xe5legget leveres i formatet JSON."}),"\n"]}),(0,s.jsx)(t.h2,{id:"api-spesifikasjon",children:"API Spesifikasjon"}),(0,s.jsx)(t.p,{children:"Skatteetaten tilbyr API for \xe5 hente trekkp\xe5legg."}),(0,s.jsx)(t.p,{children:"Open API spesifikasjonen er tilgjengelig her: swaggerhub"}),(0,s.jsx)(t.h3,{id:"trekkp\xe5legg-api",children:"Trekkp\xe5legg API"}),(0,s.jsx)(t.p,{children:"Alle URIer er relative til"}),(0,s.jsxs)(t.p,{children:[(0,s.jsx)(t.a,{href:"https://api-test.sits.no",children:"https://api-test.sits.no"})," (test)\n--- (prod)\nMetode\tHTTP request\tBeskrivelse\nhent alle gjeldende\tGET /api/trekkpaalegg/v1\tHent alle gjeldende trekkp\xe5legg for den trekkpliktige\nhent versjon\tGET /api/trekkpaalegg/v1/trekkid/trekkversjon\tHent en spesifikk versjon av et trekkp\xe5legg."]}),(0,s.jsx)(t.h3,{id:"hent-alle-gjeldende",children:"Hent alle gjeldende"}),(0,s.jsx)(t.p,{children:"GET /api/trekkpaalegg/v1"}),(0,s.jsx)(t.p,{children:"Returnerer siste versjon av samtlige trekkp\xe5legg for en trekkpliktig. Dersom en trekkpliktig har sv\xe6rt mange trekkp\xe5legg (flere tusen) s\xe5 b\xf8r man benytte fraSekvensnummer og maksAntall for begrense returen til kun \xe5 inneholde trekkp\xe5legg som er endret siden forrige sp\xf8rring. Dersom antall returnerte trekkp\xe5legg er lik maksAntall s\xe5 m\xe5 det gj\xf8res en ny sp\xf8rring med fraSekvensnummer lik det st\xf8rste sekvensnummeret i siste retur inntil man har f\xe5tt returnert samtlige endrede trekkp\xe5legg."}),(0,s.jsx)(t.h3,{id:"parametre",children:"Parametre"}),(0,s.jsx)(t.p,{children:"Navn\tType\tBeskrivelse\tNotater\nfraSekvensnummer\tString\tBegrenser returnerte trekkp\xe5legg til bare inneholde nyere enn angitt sekvensnummer. 0 eller st\xf8rre. Oppgis sammen med maksAntall. Mest relevant for trekkpliktige med sv\xe6rt mange trekkp\xe5legg\t[default til null]\nmaksAntall\tString\tAngir maks antall trekkp\xe5legg som skal returneres. 1 eller st\xf8rre. Skal bare brukes sammen med fraSekvensnummer. Mest relevant for trekkpliktige med sv\xe6rt mange trekkp\xe5legg\t[default til null]"}),(0,s.jsx)(t.h3,{id:"retur-type",children:"Retur type"}),(0,s.jsxs)(t.p,{children:["Liste av Trekkpaalegg ",(0,s.jsx)(t.a,{href:"https://skatteetaten.github.io/beta-apier/trekkpaalegg/feltbeskrivelser/Models/Trekkpaalegg",children:"https://skatteetaten.github.io/beta-apier/trekkpaalegg/feltbeskrivelser/Models/Trekkpaalegg"})]}),(0,s.jsx)(t.h3,{id:"autorisasjon",children:"Autorisasjon"}),(0,s.jsxs)(t.p,{children:["Se Tilgang ",(0,s.jsx)(t.a,{href:"https://skatteetaten.github.io/beta-apier/trekkpaalegg/tilgang",children:"https://skatteetaten.github.io/beta-apier/trekkpaalegg/tilgang"})]}),(0,s.jsx)(t.h3,{id:"http-request-headere",children:"HTTP request headere"}),(0,s.jsxs)(t.p,{children:["Content-Type: Ikke definert\nAccept: application/json, ",(0,s.jsx)(t.em,{children:"/"})]}),(0,s.jsx)(t.h3,{id:"hent-versjon",children:"Hent versjon"}),(0,s.jsx)(t.p,{children:"GET /api/trekkpaalegg/v1/trekkid/trekkversjon\nReturnerer den angitte versjonen av et trekkp\xe5legg"}),(0,s.jsx)(t.h3,{id:"parametre-1",children:"Parametre"}),(0,s.jsx)(t.p,{children:"Navn\tType\tBeskrivelse\tNotater\ntrekkid\tString\tId til trekkp\xe5legget\t[default til null]\ntrekkversjon\tString\tVersjonen til det angitte trekkp\xe5legg\t[default til null]"}),(0,s.jsx)(t.h3,{id:"retur-type-1",children:"Retur type"}),(0,s.jsx)(t.p,{children:"Trekkpaalegg"}),(0,s.jsx)(t.h3,{id:"autorisasjon-1",children:"Autorisasjon"}),(0,s.jsx)(t.p,{children:"Se Tilgang"}),(0,s.jsx)(t.h3,{id:"http-request-headere-1",children:"HTTP request headere"}),(0,s.jsxs)(t.p,{children:["Content-Type: Ikke definert\nAccept: application/json, ",(0,s.jsx)(t.em,{children:"/"})]}),(0,s.jsx)(t.p,{children:"Open API spesifikasjonen er tilgjengelig her :"}),(0,s.jsx)(t.p,{children:"swaggerhub\nTrekkp\xe5legg API\nAlle URIer er relative til"}),(0,s.jsxs)(t.p,{children:[(0,s.jsx)(t.a,{href:"https://api-test.sits.no",children:"https://api-test.sits.no"})," (test)\n--- (prod)\nMetode\tHTTP request\tBeskrivelse\nhent alle gjeldende\tGET /api/trekkpaalegg/v1\tHent alle gjeldende trekkp\xe5legg for den trekkpliktige\nhent versjon\tGET /api/trekkpaalegg/v1/",":trekkid","/",":trekkversjon","\tHent en spesifikk versjon av et trekkp\xe5legg.\nHent alle gjeldende\nGET /api/trekkpaalegg/v1"]}),(0,s.jsx)(t.p,{children:"Returnerer siste versjon av samtlige trekkp\xe5legg for en trekkpliktig. Dersom en trekkpliktig har sv\xe6rt mange trekkp\xe5legg (flere tusen) s\xe5 b\xf8r man benytte fraSekvensnummer og maksAntall for begrense returen til kun \xe5 inneholde trekkp\xe5legg som er endret siden forrige sp\xf8rring. Dersom antall returnerte trekkp\xe5legg er lik maksAntall s\xe5 m\xe5 det gj\xf8res en ny sp\xf8rring med fraSekvensnummer lik det st\xf8rste sekvensnummeret i siste retur inntil man har f\xe5tt returnert samtlige endrede trekkp\xe5legg."}),(0,s.jsx)(t.p,{children:"Parametre\nNavn\tType\tBeskrivelse\tNotater\nfraSekvensnummer\tString\tBegrenser returnerte trekkp\xe5legg til bare inneholde nyere enn angitt sekvensnummer. 0 eller st\xf8rre. Oppgis sammen med maksAntall. Mest relevant for trekkpliktige med sv\xe6rt mange trekkp\xe5legg\t[default til null]\nmaksAntall\tString\tAngir maks antall trekkp\xe5legg som skal returneres. 1 eller st\xf8rre. Skal bare brukes sammen med fraSekvensnummer. Mest relevant for trekkpliktige med sv\xe6rt mange trekkp\xe5legg\t[default til null]\nRetur type\nListe av Trekkpaalegg"}),(0,s.jsx)(t.p,{children:"Autorisasjon\nSe Tilgang"}),(0,s.jsxs)(t.p,{children:["HTTP request headere\nContent-Type: Ikke definert\nAccept: application/json, ",(0,s.jsx)(t.em,{children:"/"}),"\nHent versjon\nGET /api/trekkpaalegg/v1/trekkid/trekkversjon"]}),(0,s.jsx)(t.p,{children:"Returnerer den angitte versjonen av et trekkp\xe5legg"}),(0,s.jsx)(t.p,{children:"Parametre\nNavn\tType\tBeskrivelse\tNotater\ntrekkid\tString\tId til trekkp\xe5legget\t[default til null]\ntrekkversjon\tString\tVersjonen til det angitte trekkp\xe5legg\t[default til null]\nRetur type\nTrekkpaalegg"}),(0,s.jsx)(t.p,{children:"Autorisasjon\nSe Tilgang"}),(0,s.jsxs)(t.p,{children:["HTTP request headere\nContent-Type: Ikke definert\nAccept: application/json, ",(0,s.jsx)(t.em,{children:"/"})]}),(0,s.jsx)(t.h2,{id:"datakatalog",children:"Datakatalog"}),(0,s.jsx)(t.h2,{id:"tilgang-til-tjenesten",children:"Tilgang til tjenesten"}),(0,s.jsx)(t.p,{children:"Tilgang styres via Maskinporten."}),(0,s.jsx)(t.p,{children:"For \xe5 f\xe5 utstedt token av Maskinporten m\xe5 l\xf8nnssystemet gjennom sitt virksomhetssertifikat angi hvilket organisasjonsnummer de representerer. Dette organisasjonsnummeret m\xe5 v\xe6re godkjent av Skatteetaten."}),(0,s.jsxs)(t.p,{children:["For \xe5 benytte tjenestene for trekkp\xe5legg skal f\xf8lgende scope angis ved autentisering i Maskinporten: skatteetaten",":trekkpaalegg"]}),(0,s.jsx)(t.p,{children:"API-et st\xf8tter to varianter av autentisering via Maskinporten. Disse er beskrevet under"}),(0,s.jsx)(t.h3,{id:"alternativ-1---systemleverand\xf8r-er-trekkpliktig",children:"Alternativ 1 - Systemleverand\xf8r er trekkpliktig"}),(0,s.jsx)(t.p,{children:"Dersom systemleverand\xf8r kun skal motta trekkp\xe5legg for sin egen organisasjon, kan man benytte klassisk autentisering via Maskinporten. Mer informasjon om dette finnes her."}),(0,s.jsx)(t.h3,{id:"alternativ-2---systembruker",children:"Alternativ 2 - Systembruker"}),(0,s.jsx)(t.p,{children:"Dersom systemleverand\xf8r \xf8nsker \xe5 tilby funksjonalitet der en annen organisasjon (kunde av systemleverand\xf8ren) skal benytte systemet til \xe5 motta trekkp\xe5legg, skal Altinn sin nye funksjonalitet for \u2018systembruker\u2019 benyttes. Mer informasjon om dette finnes i Altinn Systembruker for SBS og Systembruker roadmap."}),(0,s.jsx)(t.p,{children:"Systemleverand\xf8r m\xe5 for \xe5 st\xf8tte systembruker registrere seg i Maskinporten og Altinn test environment."}),(0,s.jsx)(t.h3,{id:"testoppsett",children:"Testoppsett"}),(0,s.jsx)(t.h3,{id:"test-uten-bruk-av-systembruker-alternativ-1",children:"Test uten bruk av systembruker (alternativ 1)"}),(0,s.jsx)(t.p,{children:"Valgfrie organisasjoner fra Tenor kan benyttes som trekkpliktig."}),(0,s.jsx)(t.h3,{id:"test-der-systembruker-benyttes-alternativ-2",children:"Test der systembruker benyttes (alternativ 2)"}),(0,s.jsx)(t.p,{children:"Valgfrie organisasjoner fra Tenor kan benyttes som trekkpliktig. Den valgte organisasjonen i Tenor (som representerer en trekkpliktig) m\xe5 godkjenne at dens fagsystem kan benytte tilgangsressursen/tjenesten \xabInformasjon om trekkp\xe5legg\xbb p\xe5 vegne av virksomheten. Det opprettes da en \xabsystembruker\xbb som er koblingen mellom bruker, system, leverand\xf8r og API.\nDette API-et finnes forel\xf8pig ikke i Felles datakatalog."})]}),(0,s.jsx)(l,{headerText:"Eksempler",itemKey:"itemKey-2"}),(0,s.jsxs)(l,{headerText:"Feilkoder",itemKey:"itemKey-3",children:[(0,s.jsxs)(t.p,{children:["Se egen side for generell info om ",(0,s.jsx)(t.a,{href:"/api-dokumentasjon/om/feil",children:"feilh\xe5ndtering i tjenestene"}),"."]}),(0,s.jsx)(t.p,{children:"Tabellen under viser en oversikt over hvilke spesifikke feilkoder denne applikasjonen kan gi. Feilmeldingen vil kunne\nvariere selv om samme feilkode returneres. Dette er for \xe5 kunne gi en s\xe5 presis beskrivelse av feilen som mulig."}),(0,s.jsxs)(t.table,{children:[(0,s.jsx)(t.thead,{children:(0,s.jsxs)(t.tr,{children:[(0,s.jsx)(t.th,{children:"Feilkode"}),(0,s.jsx)(t.th,{children:"HTTP Statuskode"}),(0,s.jsx)(t.th,{children:"Feilomr\xe5de"})]})}),(0,s.jsxs)(t.tbody,{children:[(0,s.jsxs)(t.tr,{children:[(0,s.jsx)(t.td,{children:"KB-001"}),(0,s.jsx)(t.td,{children:"500"}),(0,s.jsx)(t.td,{children:"Uventet feil p\xe5 tjenesten."})]}),(0,s.jsxs)(t.tr,{children:[(0,s.jsx)(t.td,{children:"KB-002"}),(0,s.jsx)(t.td,{children:"500"}),(0,s.jsx)(t.td,{children:"Uventet feil i et bakenforliggende system."})]}),(0,s.jsxs)(t.tr,{children:[(0,s.jsx)(t.td,{children:"KB-003"}),(0,s.jsx)(t.td,{children:"404"}),(0,s.jsx)(t.td,{children:"Ukjent url benyttet."})]}),(0,s.jsxs)(t.tr,{children:[(0,s.jsx)(t.td,{children:"KB-004"}),(0,s.jsx)(t.td,{children:"401"}),(0,s.jsx)(t.td,{children:"Feil i forbindelse med autentisering."})]}),(0,s.jsxs)(t.tr,{children:[(0,s.jsx)(t.td,{children:"KB-005"}),(0,s.jsx)(t.td,{children:"403"}),(0,s.jsx)(t.td,{children:"Feil i forbindelse med samtykketoken."})]}),(0,s.jsxs)(t.tr,{children:[(0,s.jsx)(t.td,{children:"KB-006"}),(0,s.jsx)(t.td,{children:"400"}),(0,s.jsx)(t.td,{children:"Feil i forbindelse med validering av inputdata."})]}),(0,s.jsxs)(t.tr,{children:[(0,s.jsx)(t.td,{children:"KB-007"}),(0,s.jsx)(t.td,{children:"404"}),(0,s.jsx)(t.td,{children:"Fant ingen krav/betalinger p\xe5 angitt identifikator og periode."})]}),(0,s.jsxs)(t.tr,{children:[(0,s.jsx)(t.td,{children:"KB-008"}),(0,s.jsx)(t.td,{children:"406"}),(0,s.jsx)(t.td,{children:"Feil tilknyttet dataformat. Kun json eller xml er st\xf8ttet."})]}),(0,s.jsxs)(t.tr,{children:[(0,s.jsx)(t.td,{children:"KB-009"}),(0,s.jsx)(t.td,{children:"404"}),(0,s.jsx)(t.td,{children:"Ingen treff p\xe5 oppgitt identifikator."})]})]})]})]}),(0,s.jsxs)(l,{headerText:"Informasjonsmodell",itemKey:"itemKey-4",children:[(0,s.jsx)(t.p,{children:"Her ser du hele informasjonsmodellen Trekkp\xe5legg API med alle 4 endepunktene."}),(0,s.jsx)(t.p,{children:(0,s.jsx)(t.img,{alt:"Informasjonsmodell",src:n(75283).A+"",width:"2588",height:"736"})})]}),(0,s.jsxs)(l,{headerText:"Test",itemKey:"itemKey-5",children:[(0,s.jsx)(t.h2,{id:"krav-til-testgjennomf\xf8ring",children:"Krav til testgjennomf\xf8ring"}),(0,s.jsxs)(t.p,{children:["Systemleverand\xf8rene har ansvar for egen testgjennomf\xf8ring. Det m\xe5 fokuseres p\xe5 at det kan hentes meldinger via gitt endepunkt beskrevet av skatteetaten. Se ",(0,s.jsx)(t.a,{href:"./apispesifikasjon/index.md",children:"API spesifikasjon"}),"."]}),(0,s.jsx)(t.p,{children:"Prosjektet bist\xe5r med feils\xf8k og evt. feilretting av v\xe5r l\xf8sning."}),(0,s.jsx)(t.h2,{id:"oppsummering-av-test-og-oppstart-i-produksjon",children:"Oppsummering av test og oppstart i produksjon"}),(0,s.jsx)(t.p,{children:"Systemleverand\xf8rene skal etter avsluttet testperiode og i forkant av produksjon oppsummere testen. Oppsummeringen skal vise hva som er testet, samt status etter gjennomf\xf8rt test inkludert oversikt over feil og mangler. Systemleverand\xf8rene skal p\xe5 skatteetatens foresp\xf8rsel fremlegge dokumentasjon p\xe5 hvordan integrasjon er testet."}),(0,s.jsx)(t.h2,{id:"testmilj\xf8",children:"Testmilj\xf8"}),(0,s.jsxs)(t.p,{children:["Systemleverand\xf8rene m\xe5 ha testmilj\xf8er som kun best\xe5r av syntetiske data. Lenke til Skatt sitt testmilj\xf8 angitt under ",(0,s.jsx)(t.a,{href:"./apispesifikasjon/index.md",children:"API spesifikasjon"}),"."]}),(0,s.jsxs)(t.p,{children:["Testmilj\xf8et til Skatteetaten vil i utgangspunktet v\xe6re tilgjengelig 24/7, men det kan ikke forventes teknisk support eller restart av milj\xf8et hvis det g\xe5r ned utenfor ordin\xe6r arbeidstid (kl. 8 \u2013 15 alle ukedager). Milj\xf8et kan v\xe6re nede p\xe5 kveldstid og i helger p\xe5 grunn av vedlikehold. Testmilj\xf8et til Altinn er ",(0,s.jsx)(t.a,{href:"http://tt02.altinn.no",children:"TT02"}),"."]}),(0,s.jsx)(t.h2,{id:"testdata",children:"Testdata"}),(0,s.jsx)(t.p,{children:"For \xe5 teste trenger systemleverand\xf8r en testbruker som er daglig leder i en tilknyttet enhet."}),(0,s.jsxs)(t.table,{children:[(0,s.jsx)(t.thead,{children:(0,s.jsxs)(t.tr,{children:[(0,s.jsx)(t.th,{}),(0,s.jsx)(t.th,{children:"Testbehov"}),(0,s.jsx)(t.th,{children:"Beskrivelse"}),(0,s.jsx)(t.th,{children:"Kommentar"})]})}),(0,s.jsxs)(t.tbody,{children:[(0,s.jsxs)(t.tr,{children:[(0,s.jsx)(t.td,{children:"1"}),(0,s.jsx)(t.td,{children:"Hvis du allerede har en testbruker du \xf8nsker \xe5 bruke"}),(0,s.jsx)(t.td,{children:(0,s.jsxs)("ul",{children:[(0,s.jsx)("li",{children:"F\xf8lg lenke til testmilj\xf8et til Altinn"}),(0,s.jsx)("li",{children:"Velg \u2018Log inn i Altinn (TT02) testmilj\xf8\u2019"}),(0,s.jsx)("li",{children:"Velg \u2018TestID\u2019"}),(0,s.jsx)("li",{children:"Legg inn f\xf8dselsnummer til daglig leder"}),(0,s.jsx)("li",{children:"Klikk p\xe5 \u2018Autentiser\u2019"}),(0,s.jsx)("li",{children:"Under \u2018Alle dine akt\xf8rer\u2019 klikk p\xe5 organisasjon som daglig leder representerer"})]})}),(0,s.jsxs)(t.td,{children:["Lenke til testmilj\xf8 i Altinn ",(0,s.jsx)(t.a,{href:"http://tt02.altinn.no",children:"http://tt02.altinn.no"})," ",(0,s.jsx)("br",{})," ",(0,s.jsx)(t.img,{alt:"tt02",src:n(93553).A+"",width:"252",height:"224"})]})]}),(0,s.jsxs)(t.tr,{children:[(0,s.jsx)(t.td,{children:"2"}),(0,s.jsx)(t.td,{children:"Hvis du skal finne en ny testbruker"}),(0,s.jsx)(t.td,{children:(0,s.jsxs)("ul",{children:[(0,s.jsx)("li",{children:"F\xf8lg lenke til testmilj\xf8et til Altinn"}),(0,s.jsx)("li",{children:"Velg \u2018Log inn i Altinn (TT02) testmilj\xf8\u2019"}),(0,s.jsx)("li",{children:"Velg \u2018TestID\u2019"}),(0,s.jsx)("li",{children:"Velg \u2018Hent tilfeldig daglig leder\u2019"}),(0,s.jsx)("li",{children:"Lagre personidentifikator og organisasjonsnummer"}),(0,s.jsx)("li",{children:"Klikk p\xe5 \u2018Autentiser\u2019"}),(0,s.jsx)("li",{children:"Under \u2018Alle dine akt\xf8rer\u2019 klikk p\xe5 organisasjon som dagligleder representerer"})]})}),(0,s.jsxs)(t.td,{children:["Lenke til testmilj\xf8 i Altinn ",(0,s.jsx)(t.a,{href:"http://tt02.altinn.no",children:"http://tt02.altinn.no"})," ",(0,s.jsx)("br",{})," ",(0,s.jsx)(t.img,{alt:"tt02",src:n(68890).A+"",width:"504",height:"228"})]})]})]})]}),(0,s.jsx)(t.h2,{id:"oppsett-av-maskinport-integrasjon-og-eventuelt-systembruker",children:"Oppsett av maskinport-integrasjon og eventuelt systembruker"}),(0,s.jsxs)(t.p,{children:["Se ",(0,s.jsx)(t.a,{href:"./tilgang.md",children:"tilgang"})," for hvordan f\xe5 tilgang til tjenesten."]}),(0,s.jsxs)(t.p,{children:["Tilgang til scope i test bestilles ved \xe5 sende en mail med ditt organisasjonsnummer til ",(0,s.jsx)(t.a,{href:"mailto:fremtidensinnkreving@skatteetaten.no",children:"fremtidensinnkreving@skatteetaten.no"})]}),(0,s.jsx)(t.h2,{id:"verifisere-at-du-n\xe5r-l\xf8sningen-og-be-deretter-om-\xe5-f\xe5-opprettet-testdata-for-trekkp\xe5legg",children:"Verifisere at du n\xe5r l\xf8sningen og be deretter om \xe5 f\xe5 opprettet testdata for trekkp\xe5legg"}),(0,s.jsxs)(t.table,{children:[(0,s.jsx)(t.thead,{children:(0,s.jsxs)(t.tr,{children:[(0,s.jsx)(t.th,{}),(0,s.jsx)(t.th,{children:"Steg"}),(0,s.jsx)(t.th,{children:"Beskrivelse"}),(0,s.jsx)(t.th,{children:"Kommentar"})]})}),(0,s.jsxs)(t.tbody,{children:[(0,s.jsxs)(t.tr,{children:[(0,s.jsx)(t.td,{children:"1"}),(0,s.jsx)(t.td,{children:"Gj\xf8r et kall mot tjenesten for trekkp\xe5legg for \xe5 verifisere at du n\xe5r tjenesten i test"}),(0,s.jsx)(t.td,{children:"F\xf8r det er tilgjengeliggjort data for dere, s\xe5 vil du f\xe5 en respons 200."}),(0,s.jsx)(t.td,{})]}),(0,s.jsxs)(t.tr,{children:[(0,s.jsx)(t.td,{children:"2"}),(0,s.jsx)(t.td,{children:"F\xe5 tilgang p\xe5 testdata"}),(0,s.jsxs)(t.td,{children:["N\xe5r integrasjonen er testet tar du kontakt med oss via mail ",(0,s.jsx)(t.a,{href:"mailto:fremtidensinnkreving@skatteetaten.no",children:"fremtidensinnkreving@skatteetaten.no"})," og oppgir det org.nummeret dere har klargjort. Vi vil legge tilgjengelig testdata til dere for dette organisasjonsnummeret."]}),(0,s.jsx)(t.td,{children:"Dere vil kunne f\xe5 testdata p\xe5 flere parter p\xe5 samme org.nummer eller dere oppretter flere org.nummer som dere \xf8nsker \xe5 hente fra."})]})]})]})]}),(0,s.jsxs)(l,{headerText:"Sjekkliste for inkassosystemleverand\xf8rer",itemKey:"itemKey-6",children:[(0,s.jsx)(t.h2,{id:"sjekkliste-for-l\xf8nns--og-personalsystemleverand\xf8rer",children:"Sjekkliste for L\xf8nns- og personalsystemleverand\xf8rer"}),(0,s.jsx)(t.p,{children:"Integrasjon med Skatteetatens API for trekkp\xe5legg"}),(0,s.jsx)(t.h3,{id:"1-forberedelser-og-avtaler",children:"1. Forberedelser og avtaler"}),(0,s.jsxs)(t.ul,{children:["\n",(0,s.jsx)(t.li,{children:"Avklar roller og ansvar internt (teknisk kontakt, prosjektansvarlig, etc.)"}),"\n",(0,s.jsxs)(t.li,{children:["Sett deg inn i gjeldende informasjon for digital innsending av utleggsbegj\xe6ring","\n",(0,s.jsxs)(t.ul,{children:["\n",(0,s.jsx)(t.li,{children:(0,s.jsx)(t.a,{href:"https://skatteetaten.github.io/api-dokumentasjon/api/utleggsbegjaering?tab=Om+tjenesten",children:"Github"})}),"\n",(0,s.jsx)(t.li,{children:(0,s.jsx)(t.a,{href:"https://www.skatteetaten.no/om-skatteetaten/fremtidens-innkreving/systemleverandorer/lonns--og-personalsystem/",children:"Skatteettaten.no"})}),"\n",(0,s.jsx)(t.li,{children:(0,s.jsx)(t.a,{href:"https://app.swaggerhub.com/apis/skatteetaten/trekkpaalegg-app/1.4",children:"Swaggerhub"})}),"\n",(0,s.jsx)(t.li,{children:(0,s.jsx)(t.a,{href:"https://www.skatteetaten.no/samarbeidspartnere/reetablering-altinn/systemleverandor/oppkobling/",children:"Nettside for oppkobling"})}),"\n"]}),"\n"]}),"\n"]}),(0,s.jsx)(t.h3,{id:"2-tilgang-og-autentisering",children:"2. Tilgang og autentisering"}),(0,s.jsxs)(t.ul,{children:["\n",(0,s.jsx)(t.li,{children:"Skaff virksomhetssertifikat (PKI) 6"}),"\n",(0,s.jsxs)(t.li,{children:["Registrer systemet i ",(0,s.jsx)(t.a,{href:"https://docs.digdir.no/docs/Maskinporten/maskinporten_overordnet",children:"Maskinporten"})]}),"\n",(0,s.jsxs)(t.li,{children:[(0,s.jsx)(t.a,{href:"https://encoded-592c9deb-987b-4562-aa3c-9fa3d37d83e9.uri/mailto%3a%5bfremtidensinnkreving%40skatteetaten.no%5d",children:"Be Skatteetaten om tilgang"})," til test-scope: ",(0,s.jsx)(t.code,{children:"skatteetaten:trekkpaalegg"}),". Oppgi virksomhetens organisasjonsnummer (ikke syntetisk)."]}),"\n",(0,s.jsxs)(t.li,{children:["Hent testdata fra ",(0,s.jsx)(t.a,{href:"https://www.digdir.no/tenor/syntetisk-norge/3910",children:"Syntetisk Norge"})," via ",(0,s.jsx)(t.a,{href:"https://tenor.test.norge.no/",children:"Tenor testdatas\xf8k"})]}),"\n",(0,s.jsxs)(t.li,{children:["Velg syntetiske virksomheter og syntetiske personer og ",(0,s.jsx)(t.a,{href:"https://encoded-592c9deb-987b-4562-aa3c-9fa3d37d83e9.uri/mailto%3a%5bfremtidensinnkreving%40skatteetaten.no%5d",children:"be om at Skatteetaten oppretter trekkp\xe5legg i test"})]}),"\n",(0,s.jsxs)(t.li,{children:["Sett opp ",(0,s.jsx)(t.a,{href:"https://www.skatteetaten.no/samarbeidspartnere/reetablering-altinn/systemleverandor/#testplan-for-systemleverandorer",children:"Systembruker"})," dersom dere utvikler systemer for andre"]}),"\n",(0,s.jsx)(t.li,{children:"Test uthenting av token med korrekt org.nr. via Maskinporten"}),"\n"]}),(0,s.jsx)(t.h3,{id:"3-testmilj\xf8-og-testdata",children:"3. Testmilj\xf8 og testdata"}),(0,s.jsxs)(t.ul,{children:["\n",(0,s.jsxs)(t.li,{children:["Sett opp testmilj\xf8 med ",(0,s.jsx)(t.strong,{children:"kun"})," syntetiske data"]}),"\n",(0,s.jsx)(t.li,{children:"Bruk kun syntetiske data i vedlegg og meldinger"}),"\n",(0,s.jsxs)(t.li,{children:["Koble til Skatteetatens testmilj\xf8: ",(0,s.jsx)(t.code,{children:"https://api-test.sits.no"})]}),"\n"]}),(0,s.jsx)(t.h3,{id:"4-implementasjon-og-integrasjon",children:"4. Implementasjon og integrasjon"}),(0,s.jsxs)(t.ul,{children:["\n",(0,s.jsxs)(t.li,{children:["F\xf8lg ",(0,s.jsx)(t.a,{href:"https://app.swaggerhub.com/apis/skatteetaten/trekkpaalegg-app/1.4",children:"API-spesifikasjonen p\xe5 SwaggerHub"})]}),"\n",(0,s.jsx)(t.li,{children:"S\xf8rg for robust feilh\xe5ndtering og validering"}),"\n",(0,s.jsxs)(t.li,{children:["Implementer evt. polling eller event-varsling via ",(0,s.jsx)(t.a,{href:"https://docs.digdir.no/docs/dialogporten/",children:"Dialogporten"})," (valgfritt)"]}),"\n"]}),(0,s.jsx)(t.h3,{id:"5-testing-og-verifisering",children:"5. Testing og verifisering"}),(0,s.jsxs)(t.ul,{children:["\n",(0,s.jsxs)(t.li,{children:["Gjennomf\xf8r testing inkludert:","\n",(0,s.jsxs)(t.ul,{children:["\n",(0,s.jsx)(t.li,{children:"Test full flyt: mottak, feilh\xe5ndtering og validering"}),"\n",(0,s.jsx)(t.li,{children:"Verifiser at dere mottar korrekt respons fra API"}),"\n",(0,s.jsx)(t.li,{children:"Loggf\xf8r testresultater og oppsummer testforl\xf8pet"}),"\n",(0,s.jsx)(t.li,{children:"Dokumenter integrasjon og test"}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(t.li,{children:["Send oppsummering til Skatteetaten ved foresp\xf8rsel. ",(0,s.jsx)(t.strong,{children:"Du f\xe5r ikke tilgang til produksjonsmilj\xf8 f\xf8r dette er gjennomf\xf8rt"})]}),"\n"]}),(0,s.jsx)(t.h3,{id:"6-overgang-til-produksjon",children:"6. Overgang til produksjon"}),(0,s.jsxs)(t.ul,{children:["\n",(0,s.jsxs)(t.li,{children:[(0,s.jsx)(t.a,{href:"https://encoded-592c9deb-987b-4562-aa3c-9fa3d37d83e9.uri/mailto%3a%5bmailto%3afremtidensinnkreving%40skatteetaten.no%5d",children:"Be om tilgang"})," til produksjons-scope: ",(0,s.jsx)(t.code,{children:"skatteetaten:trekkp\xe5\xe5legg"}),"\n",(0,s.jsxs)(t.ul,{children:["\n",(0,s.jsx)(t.li,{children:"Signer avtale (se \xabvilk\xe5r for bruk\xbb) med Skatteetaten som kommer i retur"}),"\n"]}),"\n"]}),"\n",(0,s.jsx)(t.li,{children:"Motta og verifiser tilgang til produksjons-scope i Maskinporten"}),"\n",(0,s.jsx)(t.li,{children:"Bytt milj\xf8 i integrasjonen til produksjon"}),"\n",(0,s.jsx)(t.li,{children:"Utf\xf8r teknisk verifikasjon i produksjon"}),"\n",(0,s.jsx)(t.li,{children:"Klargj\xf8r supportrutiner for h\xe5ndtering av reelle saker"}),"\n"]}),(0,s.jsx)(t.h3,{id:"7-oppf\xf8lging",children:"7. Oppf\xf8lging"}),(0,s.jsxs)(t.ul,{children:["\n",(0,s.jsxs)(t.li,{children:["Abonner p\xe5 oppdateringer fra Skatteetaten (f.eks. endringer i API eller informasjonsmodell) og f\xf8lg med p\xe5 informasjonsm\xf8ter mm","\n",(0,s.jsxs)(t.ul,{children:["\n",(0,s.jsxs)(t.li,{children:["F\xf8lg med p\xe5 ",(0,s.jsx)(t.a,{href:"https://status.skatteetaten.no/",children:"Skatteetatens Statusside"})]}),"\n",(0,s.jsx)(t.li,{children:(0,s.jsx)(t.a,{href:"https://www.skatteetaten.no/deling/kontakt",children:"Kontaktskjema for datadeling"})}),"\n"]}),"\n"]}),"\n",(0,s.jsx)(t.li,{children:"Gi tilbakemeldinger eller innspill ved behov"}),"\n"]})]})]})]})}function g(e={}){const{wrapper:t}={...(0,i.R)(),...e.components};return t?(0,s.jsx)(t,{...e,children:(0,s.jsx)(k,{...e})}):k(e)}function p(e,t){throw new Error("Expected "+(t?"component":"object")+" `"+e+"` to be defined: you likely forgot to import, pass, or provide it.")}},75283:(e,t,n)=>{n.d(t,{A:()=>r});const r=n.p+"assets/images/informasjonsmodell-trekkpalegg-2acd5d4db7e8a1b4e2db1528fe2f940f.png"},65868:(e,t,n)=>{n.d(t,{A:()=>r});const r=n.p+"assets/images/trekkpalegg_oversikt-9f6c41a19b9be1fdf59eff74c1ab58b8.png"},93553:(e,t,n)=>{n.d(t,{A:()=>r});const r=n.p+"assets/images/tt02-1-34d324b257394178b20a036cde3c9334.png"},68890:(e,t,n)=>{n.d(t,{A:()=>r});const r=n.p+"assets/images/tt02-2-5d91695efa685fd38f4da1deeaa211f1.png"},28453:(e,t,n)=>{n.d(t,{R:()=>l,x:()=>a});var r=n(96540);const s={},i=r.createContext(s);function l(e){const t=r.useContext(i);return r.useMemo((function(){return"function"==typeof e?e(t):{...t,...e}}),[t,e])}function a(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:l(e.components),r.createElement(i.Provider,{value:t},e.children)}}}]);