"use strict";(self.webpackChunkapi_dokumentasjon=self.webpackChunkapi_dokumentasjon||[]).push([[6383],{569:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>l,contentTitle:()=>k,default:()=>m,frontMatter:()=>i,metadata:()=>s,toc:()=>o});const s=JSON.parse('{"id":"om/samtykke","title":"Samtykke","description":"Skatteetaten tilbyr samtykkebasert datauthenting basert p\xe5 Altinn sin l\xf8sning for digitalt samtykke.","source":"@site/docs/om/samtykke.md","sourceDirName":"om","slug":"/om/samtykke","permalink":"/api-dokumentasjon/om/samtykke","draft":false,"unlisted":false,"tags":[{"inline":true,"label":"Samtykke","permalink":"/api-dokumentasjon/tags/samtykke"},{"inline":true,"label":"Sikkerhet","permalink":"/api-dokumentasjon/tags/sikkerhet"}],"version":"current","frontMatter":{"title":"Samtykke","slug":"/om/samtykke","folder":"om","sidebar":"mydoc_sidebar","datatable":true,"tags":["Samtykke","Sikkerhet"],"keywords":["datatables","tables","grids","markdown","multimarkdown","jquery plugins"],"last_updated":"Nov 24, 2022","hide_table_of_contents":true},"sidebar":"docs","previous":{"title":"Rettighetspakker","permalink":"/api-dokumentasjon/om/rettighetspakker"},"next":{"title":"Sikkerhet","permalink":"/api-dokumentasjon/om/sikkerhet"}}');var r=n(74848),a=n(28453);const i={title:"Samtykke",slug:"/om/samtykke",folder:"om",sidebar:"mydoc_sidebar",datatable:!0,tags:["Samtykke","Sikkerhet"],keywords:["datatables","tables","grids","markdown","multimarkdown","jquery plugins"],last_updated:"Nov 24, 2022",hide_table_of_contents:!0},k=void 0,l={},o=[{value:"F\xe5 tilgang",id:"f\xe5-tilgang",level:2},{value:"Be om samtykke",id:"be-om-samtykke",level:2},{value:"Fjerne samtykke",id:"fjerne-samtykke",level:2},{value:"Tjenester med st\xf8tte for samtykke",id:"tjenester-med-st\xf8tte-for-samtykke",level:2}];function d(e){const t={a:"a",code:"code",em:"em",h2:"h2",img:"img",li:"li",ol:"ol",p:"p",ul:"ul",...(0,a.R)(),...e.components},{InfoMessageBar:s,Summary:i}=t;return s||h("InfoMessageBar",!0),i||h("Summary",!0),(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(i,{children:" Skatteetaten tilbyr samtykkebasert datauthenting basert p\xe5 Altinn sin l\xf8sning for digitalt samtykke."}),"\n",(0,r.jsx)(t.p,{children:(0,r.jsx)(t.a,{target:"_blank","data-noBrokenLinkCheck":!0,href:n(8662).A+"",children:(0,r.jsx)(t.img,{alt:"illustrasjon av samtykkeprosessen",src:n(54850).A+"",width:"1249",height:"676"})})}),"\n",(0,r.jsx)(t.h2,{id:"f\xe5-tilgang",children:"F\xe5 tilgang"}),"\n",(0,r.jsxs)(t.p,{children:["F\xf8r du som konsument kan benytte Skatteetaten API-er som krever samtykke eller fullmakt m\xe5 du f\xe5 tilgang til Altinn's samtykkel\xf8sning. Altinn har beskrevet det som skal til for \xe5 ",(0,r.jsx)(t.a,{href:"https://altinn.github.io/docs/utviklingsguider/samtykke/datakonsument/komme-i-gang",children:"komme i gang med samtykke"}),". Skatteetaten er her datakilden og har p\xe5 forh\xe5nd opprettet tjenestekoder og tjenesteutgavekoder for API-ene. N\xe6rmere informasjon om dette finner du i API-dokumentasjonen. Merk at Skatteetaten ikke benytter tjenesteeierstyrt rettighetsregister."]}),"\n",(0,r.jsx)(t.h2,{id:"be-om-samtykke",children:"Be om samtykke"}),"\n",(0,r.jsxs)(t.p,{children:["N\xe5r du har f\xe5tt tilgang til Altinn's samtykkel\xf8sning og API-et til Skatteetaten kan det ",(0,r.jsx)(t.a,{href:"https://altinn.github.io/docs/utviklingsguider/samtykke/datakonsument/be-om-samtykke",children:"bes om samtykke"}),". Skatteetaten st\xf8tter kun ",(0,r.jsx)(t.em,{children:"Forh\xe5ndsregistrerte samtykkeforesp\xf8rsler"})," og det er heller ikke mulig \xe5 overstyre de forh\xe5ndsdefinerte tekstene. ",(0,r.jsx)(t.em,{children:"Request Message"})," skal derfor ikke benyttes i foresp\xf8rselen."]}),"\n",(0,r.jsx)(t.p,{children:"Den overordnetete flyten for samtykkedialogen blir da som f\xf8lger:"}),"\n",(0,r.jsxs)(t.ol,{children:["\n",(0,r.jsxs)(t.li,{children:["\n",(0,r.jsx)(t.p,{children:"Bruker logger seg p\xe5 nettl\xf8sningen for \xe5 f.eks. s\xf8ke om l\xe5n eller se sine Krav og betalinger. Konsumenter m\xe5 dermed ha et samtykke eller fullmakt for \xe5 innhente opplysninger p\xe5 vegne av brukeren."}),"\n"]}),"\n",(0,r.jsxs)(t.li,{children:["\n",(0,r.jsxs)(t.p,{children:["Konsument innhenter samtykket ved \xe5 sende en samtykkeforesp\xf8rsel for bruker til Altinn med ",(0,r.jsx)(t.em,{children:"ServiceCode"})," og ",(0,r.jsx)(t.em,{children:"ServiceCodeEdition"})," for de aktuelle tjenestene og mottar en ",(0,r.jsx)(t.em,{children:"AuthorizationCode"}),". Dersom det allerede foreligger et gyldig samtykke som er innenfor utl\xf8pstiden (f.eks. 90 dager for ",(0,r.jsx)(t.em,{children:"Krav og betalinger"}),"), fortsetter flyten i steg 6."]}),"\n"]}),"\n",(0,r.jsxs)(t.li,{children:["\n",(0,r.jsxs)(t.p,{children:["Konsument sender deretter brukeren til samtykkesiden hos Altinn med ",(0,r.jsx)(t.em,{children:"Authorization Code"})," fra samtykkeforesp\xf8rselen og en ",(0,r.jsx)(t.em,{children:"RedirectURL"}),", som er en lenke til siden brukeren skal sendes tilbake til etter at samtykket er gitt."]}),"\n"]}),"\n",(0,r.jsxs)(t.li,{children:["\n",(0,r.jsx)(t.p,{children:"Brukeren blir presentert for samtykkesiden som inneholder en beskrivelse av hva det skal gis samtykke til. Det er Skatteetaten som har definert dette innholdet."}),"\n"]}),"\n",(0,r.jsxs)(t.li,{children:["\n",(0,r.jsxs)(t.p,{children:["Brukeren gir samtykke og sendes tilbake til konsumentens nettsider p\xe5 ",(0,r.jsx)(t.em,{children:"Redirect URL-en"})," som ble oppgitt."]}),"\n"]}),"\n",(0,r.jsxs)(t.li,{children:["\n",(0,r.jsxs)(t.p,{children:["Konsument ",(0,r.jsx)(t.a,{href:"https://altinn.github.io/docs/utviklingsguider/samtykke/datakonsument/hente-token",children:"henter et Samtykketoken"})," fra Altinn ved bruk av ",(0,r.jsx)(t.em,{children:"Authorization Code"}),". Samtykketokenet har vanligvis utl\xf8pstid p\xe5 30 sekunder, men kan innhentes p\xe5 nytt med samme ",(0,r.jsx)(t.em,{children:"AuthorizationCode"})," s\xe5 lenge samtykket fortsatt er gyldig."]}),"\n"]}),"\n",(0,r.jsxs)(t.li,{children:["\n",(0,r.jsxs)(t.p,{children:["Konsument sender med samtykketokenet i foresp\xf8rslene til API-et gjennom \xe5 sette en HTTP-headerverdi: ",(0,r.jsx)(t.code,{children:"AltinnSamtykke: <samtykketoken>"}),". Foresp\xf8rselen m\xe5 ogs\xe5 inneholde et ",(0,r.jsx)(t.a,{href:"/api-dokumentasjon/om/sikkerhet",children:"Maskinporten-token"}),"."]}),"\n"]}),"\n",(0,r.jsxs)(t.li,{children:["\n",(0,r.jsx)(t.p,{children:"Skatteetaten sjekker Maskinporten- og Samtykketoken og utleverer dataene."}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(s,{children:(0,r.jsxs)(t.p,{children:["Samtykkedialogen kan ikke innpakkes i en iFrame eller annen branding som er egnet til \xe5 utydeliggj\xf8re domenet samtykkedialogen foreg\xe5r p\xe5 (som er altinn + idporten). Dette er begrunnet med et potensielt misbruksscenario beskrevet i ",(0,r.jsx)(t.a,{href:"https://tools.ietf.org/html/draft-ietf-oauth-v2-23#section-10.13",children:"OAuth2-spesifikasjonen"})," (clickjacking)"]})}),"\n",(0,r.jsx)(t.h2,{id:"fjerne-samtykke",children:"Fjerne samtykke"}),"\n",(0,r.jsxs)(t.p,{children:["En bruker kan ogs\xe5 ",(0,r.jsx)(t.a,{href:"https://info.altinn.no/hjelp/profil/samtykke/",children:"fjerne et samtykke"}),", og dette gj\xf8res p\xe5 brukerens profil i Altinn."]}),"\n",(0,r.jsx)(t.h2,{id:"tjenester-med-st\xf8tte-for-samtykke",children:"Tjenester med st\xf8tte for samtykke"}),"\n",(0,r.jsx)(t.p,{children:"F\xf8lgende API-er hos Skatteetaten st\xf8tter utlevering gjennom samtykke eller fullmakt for enkelte rettighetspakker. Detaljer om parameterne som er n\xf8dvendig for \xe5 f\xe5 utstedt samtykker eller fullmakt er beskrevet i dokumentasjonen for hvert enkelt api."}),"\n",(0,r.jsx)(t.p,{children:"Samtykke fra skatteyter:"}),"\n",(0,r.jsxs)(t.ul,{children:["\n",(0,r.jsx)(t.li,{children:(0,r.jsx)(t.a,{href:"/api-dokumentasjon/api/inntekt",children:"Inntekt API"})}),"\n",(0,r.jsx)(t.li,{children:(0,r.jsx)(t.a,{href:"/api-dokumentasjon/api/summertskattegrunnlag",children:"Summert skattegrunnlag API"})}),"\n"]}),"\n",(0,r.jsx)(t.p,{children:"Samtykke fra virksomhet:"}),"\n",(0,r.jsxs)(t.ul,{children:["\n",(0,r.jsx)(t.li,{children:(0,r.jsx)(t.a,{href:"/api-dokumentasjon/api/kravogbetalinger",children:"Krav og betalinger API"})}),"\n",(0,r.jsx)(t.li,{children:(0,r.jsx)(t.a,{href:"/api-dokumentasjon/api/arbeidsgiveravgift",children:"Arbeidsgiveravgift API"})}),"\n",(0,r.jsx)(t.li,{children:(0,r.jsx)(t.a,{href:"/api-dokumentasjon/api/mva_meldingsopplysning",children:"Mva meldingsopplysning API"})}),"\n",(0,r.jsx)(t.li,{children:(0,r.jsx)(t.a,{href:"/api-dokumentasjon/api/oppdragutenlandskevirksomheter",children:"Oppdrag utenlanske virksomheter API"})}),"\n",(0,r.jsx)(t.li,{children:(0,r.jsx)(t.a,{href:"/api-dokumentasjon/api/restanser",children:"Restanser API"})}),"\n"]}),"\n",(0,r.jsxs)(t.p,{children:["Se egen dokumentasjon for ",(0,r.jsx)(t.a,{href:"/api-dokumentasjon/test/testavsamtykke",children:"hvordan teste med samtykke"}),"."]})]})}function m(e={}){const{wrapper:t}={...(0,a.R)(),...e.components};return t?(0,r.jsx)(t,{...e,children:(0,r.jsx)(d,{...e})}):d(e)}function h(e,t){throw new Error("Expected "+(t?"component":"object")+" `"+e+"` to be defined: you likely forgot to import, pass, or provide it.")}},8662:(e,t,n)=>{n.d(t,{A:()=>s});const s=n.p+"assets/files/samtykke-30129d9cf8a5f23caed1f5596aa7d6e4.png"},54850:(e,t,n)=>{n.d(t,{A:()=>s});const s=n.p+"assets/images/samtykke-30129d9cf8a5f23caed1f5596aa7d6e4.png"},28453:(e,t,n)=>{n.d(t,{R:()=>i,x:()=>k});var s=n(96540);const r={},a=s.createContext(r);function i(e){const t=s.useContext(a);return s.useMemo((function(){return"function"==typeof e?e(t):{...t,...e}}),[t,e])}function k(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:i(e.components),s.createElement(a.Provider,{value:t},e.children)}}}]);