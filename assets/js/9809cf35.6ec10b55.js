"use strict";(self.webpackChunkapi_dokumentasjon=self.webpackChunkapi_dokumentasjon||[]).push([[4122],{80467:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>d,contentTitle:()=>a,default:()=>g,frontMatter:()=>l,metadata:()=>r,toc:()=>k});const r=JSON.parse('{"id":"api/trekkpaalegg","title":"Trekkp\xe5legg API","description":"Denne siden beskriver et nytt grensesnitt mellom IT-systemene til Skatteetaten og","source":"@site/docs/api/trekkpaalegg.md","sourceDirName":"api","slug":"/api/trekkpaalegg","permalink":"/api-dokumentasjon/api/trekkpaalegg","draft":false,"unlisted":false,"tags":[{"inline":true,"label":"API","permalink":"/api-dokumentasjon/tags/api"},{"inline":true,"label":"Innkreving","permalink":"/api-dokumentasjon/tags/innkreving"}],"version":"current","frontMatter":{"title":"Trekkp\xe5legg API","slug":"/api/trekkpaalegg","folder":"api","sidebar":"mydoc_sidebar","datatable":true,"tags":["API","Innkreving"],"keywords":["trekkpaalegg","innkreving"],"last_updated":"Apr 11, 2025","hide_table_of_contents":true}}');var s=n(74848),i=n(28453);const l={title:"Trekkp\xe5legg API",slug:"/api/trekkpaalegg",folder:"api",sidebar:"mydoc_sidebar",datatable:!0,tags:["API","Innkreving"],keywords:["trekkpaalegg","innkreving"],last_updated:"Apr 11, 2025",hide_table_of_contents:!0},a=void 0,d={},k=[{value:"Scope",id:"scope",level:2},{value:"Teknisk spesifikasjon",id:"teknisk-spesifikasjon",level:2},{value:"Datakatalog",id:"datakatalog",level:2},{value:"Tenor testdatas\xf8k",id:"tenor-testdatas\xf8k",level:2},{value:"Testdata",id:"testdata",level:2}];function o(e){const t={a:"a",code:"code",em:"em",h2:"h2",img:"img",li:"li",p:"p",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,i.R)(),...e.components},{Summary:r,TabItem:l,Tabs:a}=t;return r||p("Summary",!0),l||p("TabItem",!0),a||p("Tabs",!0),(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(r,{children:"Denne siden beskriver et nytt grensesnitt mellom IT-systemene til Skatteetaten og\ntrekkpliktige/arbeidsgivere."}),"\n",(0,s.jsxs)(a,{underline:!0,children:[(0,s.jsxs)(l,{headerText:"Om tjenesten",itemKey:"itemKey-1",default:!0,children:[(0,s.jsx)(t.p,{children:"M\xe5lgruppen for siden er utviklere og IT-arkitekter hos systemleverand\xf8rer som leverer l\xf8nns- og personalsystemer (eller\nsluttbrukersystemer) til arbeidsgivere. Slike systemer kalles i det videre sluttbrukersystemer og forkortes SBS.\nDet skal etableres et nytt grensesnitt for \xe5 formidle trekkp\xe5legg fra Skatteetaten til arbeidsgivere med ansatte som\nskal ha utleggstrekk i l\xf8nn."}),(0,s.jsxs)(t.p,{children:["Grensesnittet vil p\xe5 sikt erstatte det eksisterende grensesnittet for trekkformidling, men i f\xf8rste omgang vil det nye\ngrensesnittet komme i tillegg til det eksisterende grensesnittet. Grensesnittet vil f\xf8rst tilbys i et testmilj\xf8,\nderetter i piloter og til slutt i full produksjon.\nFiguren under viser arkitekturen: ",(0,s.jsx)(t.a,{target:"_blank","data-noBrokenLinkCheck":!0,href:n(707).A+"",children:(0,s.jsx)(t.img,{alt:"Arkitektur",src:n(97215).A+"",width:"994",height:"660"})})]}),(0,s.jsx)(t.p,{children:"For generell informasjon om tjenester fra Skatteetaten se egne sider om:"}),(0,s.jsxs)(t.ul,{children:["\n",(0,s.jsx)(t.li,{children:(0,s.jsx)(t.a,{href:"/api-dokumentasjon/om/sikkerhet",children:"Sikkerhetsmekansimer"})}),"\n",(0,s.jsx)(t.li,{children:(0,s.jsx)(t.a,{href:"/api-dokumentasjon/om/systembruker",children:"Systembruker"})}),"\n",(0,s.jsx)(t.li,{children:(0,s.jsx)(t.a,{href:"/api-dokumentasjon/om/feil",children:"Feilh\xe5ndtering"})}),"\n",(0,s.jsx)(t.li,{children:(0,s.jsx)(t.a,{href:"/api-dokumentasjon/om/versjoner",children:"Versjonering"})}),"\n",(0,s.jsx)(t.li,{children:(0,s.jsx)(t.a,{href:"/api-dokumentasjon/om/tekniskspesifikasjon",children:"Teknisk spesifikasjon"})}),"\n"]}),(0,s.jsx)(t.h2,{id:"scope",children:"Scope"}),(0,s.jsxs)(t.p,{children:["F\xf8lgende scope skal benyttes ved autentisering i Maskinporten: ",(0,s.jsx)(t.code,{children:"skatteetaten:trekkpaalegg"})]}),(0,s.jsx)(t.h2,{id:"teknisk-spesifikasjon",children:"Teknisk spesifikasjon"}),(0,s.jsxs)(t.p,{children:["URL-er til API-et, beskrivelsen av parameterne, endepunkter og respons ligger\ni ",(0,s.jsx)(t.a,{href:"https://app.swaggerhub.com/apis/skatteetaten/trekkpaalegg-app",children:"Open API spesifikasjonen"})," p\xe5 SwaggerHub."]}),(0,s.jsx)(t.p,{children:"Skatteetaten tilbyr API for \xe5 hente trekkp\xe5legg."}),(0,s.jsx)(t.p,{children:"Hovedtrekkene i det nye grensesnittet er:"}),(0,s.jsxs)(t.ul,{children:["\n",(0,s.jsx)(t.li,{children:"Grensesnittet er et maskin-maskin-grensesnitt som overf\xf8rer trekkp\xe5legg fra Skatteetaten til arbeidsgivere med\nSBS-systemer."}),"\n",(0,s.jsx)(t.li,{children:"Grensesnittet er basert p\xe5 en RESTful-stil som tilbyr et API."}),"\n",(0,s.jsx)(t.li,{children:"SBS m\xe5 sp\xf8rre (poll) mot grensesnittet for \xe5 sjekke om det er nye trekkp\xe5legg."}),"\n",(0,s.jsx)(t.li,{children:"Det vil etter hvert komme et grensesnitt der SBS kan motta notifikasjon (event) om at Skatteetaten har et nytt\ntrekkp\xe5legg til arbeidsgiver."}),"\n",(0,s.jsx)(t.li,{children:"I grensesnittet m\xe5 SBS presentere et token som inneholder organisasjonsnummeret til trekkpliktig arbeidsgiver."}),"\n",(0,s.jsx)(t.li,{children:'Tokenet f\xe5r SBS ved \xe5 koble seg opp mot Maskinporten med et gitt "scope".'}),"\n",(0,s.jsx)(t.li,{children:"Trekkp\xe5legget leveres i formatet JSON."}),"\n"]}),(0,s.jsx)(t.p,{children:"Skatteetaten tilbyr API for \xe5 hente trekkp\xe5legg."}),(0,s.jsx)(t.p,{children:"Open API spesifikasjonen er tilgjengelig her :"}),(0,s.jsx)(t.p,{children:"swaggerhub\nTrekkp\xe5legg API\nAlle URIer er relative til"}),(0,s.jsxs)(t.p,{children:[(0,s.jsx)(t.a,{href:"https://api-test.sits.no",children:"https://api-test.sits.no"})," (test)\n--- (prod)\nMetode\tHTTP request\tBeskrivelse\nhent alle gjeldende\tGET /api/trekkpaalegg/v1\tHent alle gjeldende trekkp\xe5legg for den trekkpliktige\nhent versjon\tGET /api/trekkpaalegg/v1/",":trekkid","/",":trekkversjon","\tHent en spesifikk versjon av et trekkp\xe5legg.\nHent alle gjeldende\nGET /api/trekkpaalegg/v1"]}),(0,s.jsx)(t.p,{children:"Returnerer siste versjon av samtlige trekkp\xe5legg for en trekkpliktig. Dersom en trekkpliktig har sv\xe6rt mange trekkp\xe5legg (flere tusen) s\xe5 b\xf8r man benytte fraSekvensnummer og maksAntall for begrense returen til kun \xe5 inneholde trekkp\xe5legg som er endret siden forrige sp\xf8rring. Dersom antall returnerte trekkp\xe5legg er lik maksAntall s\xe5 m\xe5 det gj\xf8res en ny sp\xf8rring med fraSekvensnummer lik det st\xf8rste sekvensnummeret i siste retur inntil man har f\xe5tt returnert samtlige endrede trekkp\xe5legg."}),(0,s.jsx)(t.p,{children:"Parametre\nNavn\tType\tBeskrivelse\tNotater\nfraSekvensnummer\tString\tBegrenser returnerte trekkp\xe5legg til bare inneholde nyere enn angitt sekvensnummer. 0 eller st\xf8rre. Oppgis sammen med maksAntall. Mest relevant for trekkpliktige med sv\xe6rt mange trekkp\xe5legg\t[default til null]\nmaksAntall\tString\tAngir maks antall trekkp\xe5legg som skal returneres. 1 eller st\xf8rre. Skal bare brukes sammen med fraSekvensnummer. Mest relevant for trekkpliktige med sv\xe6rt mange trekkp\xe5legg\t[default til null]\nRetur type\nListe av Trekkpaalegg"}),(0,s.jsx)(t.p,{children:"Autorisasjon\nSe Tilgang"}),(0,s.jsxs)(t.p,{children:["HTTP request headere\nContent-Type: Ikke definert\nAccept: application/json, ",(0,s.jsx)(t.em,{children:"/"}),"\nHent versjon\nGET /api/trekkpaalegg/v1/trekkid/trekkversjon"]}),(0,s.jsx)(t.p,{children:"Returnerer den angitte versjonen av et trekkp\xe5legg"}),(0,s.jsx)(t.p,{children:"Parametre\nNavn\tType\tBeskrivelse\tNotater\ntrekkid\tString\tId til trekkp\xe5legget\t[default til null]\ntrekkversjon\tString\tVersjonen til det angitte trekkp\xe5legg\t[default til null]\nRetur type\nTrekkpaalegg"}),(0,s.jsx)(t.p,{children:"Autorisasjon\nSe Tilgang"}),(0,s.jsxs)(t.p,{children:["HTTP request headere\nContent-Type: Ikke definert\nAccept: application/json, ",(0,s.jsx)(t.em,{children:"/"})]}),(0,s.jsx)(t.h2,{id:"datakatalog",children:"Datakatalog"}),(0,s.jsx)(t.p,{children:"Dette API-et finnes forel\xf8pig ikke i Felles datakatalog."})]}),(0,s.jsx)(l,{headerText:"Eksempler",itemKey:"itemKey-2"}),(0,s.jsxs)(l,{headerText:"Feilkoder",itemKey:"itemKey-3",children:[(0,s.jsxs)(t.p,{children:["Se egen side for generell info om ",(0,s.jsx)(t.a,{href:"/api-dokumentasjon/om/feil",children:"feilh\xe5ndtering i tjenestene"}),"."]}),(0,s.jsx)(t.p,{children:"Tabellen under viser en oversikt over hvilke spesifikke feilkoder denne applikasjonen kan gi. Feilmeldingen vil kunne\nvariere selv om samme feilkode returneres. Dette er for \xe5 kunne gi en s\xe5 presis beskrivelse av feilen som mulig."}),(0,s.jsxs)(t.table,{children:[(0,s.jsx)(t.thead,{children:(0,s.jsxs)(t.tr,{children:[(0,s.jsx)(t.th,{children:"Feilkode"}),(0,s.jsx)(t.th,{children:"HTTP Statuskode"}),(0,s.jsx)(t.th,{children:"Feilomr\xe5de"})]})}),(0,s.jsxs)(t.tbody,{children:[(0,s.jsxs)(t.tr,{children:[(0,s.jsx)(t.td,{children:"KB-001"}),(0,s.jsx)(t.td,{children:"500"}),(0,s.jsx)(t.td,{children:"Uventet feil p\xe5 tjenesten."})]}),(0,s.jsxs)(t.tr,{children:[(0,s.jsx)(t.td,{children:"KB-002"}),(0,s.jsx)(t.td,{children:"500"}),(0,s.jsx)(t.td,{children:"Uventet feil i et bakenforliggende system."})]}),(0,s.jsxs)(t.tr,{children:[(0,s.jsx)(t.td,{children:"KB-003"}),(0,s.jsx)(t.td,{children:"404"}),(0,s.jsx)(t.td,{children:"Ukjent url benyttet."})]}),(0,s.jsxs)(t.tr,{children:[(0,s.jsx)(t.td,{children:"KB-004"}),(0,s.jsx)(t.td,{children:"401"}),(0,s.jsx)(t.td,{children:"Feil i forbindelse med autentisering."})]}),(0,s.jsxs)(t.tr,{children:[(0,s.jsx)(t.td,{children:"KB-005"}),(0,s.jsx)(t.td,{children:"403"}),(0,s.jsx)(t.td,{children:"Feil i forbindelse med samtykketoken."})]}),(0,s.jsxs)(t.tr,{children:[(0,s.jsx)(t.td,{children:"KB-006"}),(0,s.jsx)(t.td,{children:"400"}),(0,s.jsx)(t.td,{children:"Feil i forbindelse med validering av inputdata."})]}),(0,s.jsxs)(t.tr,{children:[(0,s.jsx)(t.td,{children:"KB-007"}),(0,s.jsx)(t.td,{children:"404"}),(0,s.jsx)(t.td,{children:"Fant ingen krav/betalinger p\xe5 angitt identifikator og periode."})]}),(0,s.jsxs)(t.tr,{children:[(0,s.jsx)(t.td,{children:"KB-008"}),(0,s.jsx)(t.td,{children:"406"}),(0,s.jsx)(t.td,{children:"Feil tilknyttet dataformat. Kun json eller xml er st\xf8ttet."})]}),(0,s.jsxs)(t.tr,{children:[(0,s.jsx)(t.td,{children:"KB-009"}),(0,s.jsx)(t.td,{children:"404"}),(0,s.jsx)(t.td,{children:"Ingen treff p\xe5 oppgitt identifikator."})]})]})]})]}),(0,s.jsxs)(l,{headerText:"Informasjonsmodell",itemKey:"itemKey-4",children:[(0,s.jsx)(t.p,{children:"Her ser du hele informasjonsmodellen Trekkp\xe5legg API med alle 4 endepunktene."}),(0,s.jsx)(t.p,{children:(0,s.jsx)(t.a,{target:"_blank","data-noBrokenLinkCheck":!0,href:n(3484).A+"",children:(0,s.jsx)(t.img,{alt:"Informasjonsmodell",src:n(15240).A+"",width:"2588",height:"736"})})})]}),(0,s.jsxs)(l,{headerText:"Test",itemKey:"itemKey-5",children:[(0,s.jsx)(t.p,{children:"I f\xf8rste omgang er det test kun tilgjengelig for et utvalg leverand\xf8rer som det er inng\xe5tt avtale med og som skal v\xe6re\nmed \xe5 pilotere l\xf8sningene."}),(0,s.jsx)(t.h2,{id:"tenor-testdatas\xf8k",children:"Tenor testdatas\xf8k"}),(0,s.jsxs)(t.p,{children:["Det finnes pt. ikke s\xf8k i ",(0,s.jsx)(t.a,{href:"/api-dokumentasjon/test/tenor",children:"Tenor"})," for denne tjenesten, men egenskaper ved enhetene som har testdata kan s\xf8kes frem i Tenor."]}),(0,s.jsx)(t.h2,{id:"testdata",children:"Testdata"}),(0,s.jsx)(t.p,{children:"F\xf8lgende enkeltmannsforetak (ENK) er tilgjengelige for denne tjenesten i Skatteetatens testmilj\xf8 for eksterne.\nV\xe6r oppmerksom p\xe5 at det er et levende testdatasett som kan endre seg i l\xf8pet av testperioden. Ta kontakt dersom du har\nbehov for ytterligere testdata."}),(0,s.jsx)(t.p,{children:"Obs. regnskapssystemer som tester vil i Test kunne gj\xf8re oppslag p\xe5 alle testvirksomheter, selv om de i pilotperioden\nkun kan gj\xf8re oppslag for egen virksomhet i Prod."}),(0,s.jsxs)(t.table,{children:[(0,s.jsx)(t.thead,{children:(0,s.jsx)(t.tr,{children:(0,s.jsx)(t.th,{children:"Organisasjonsnummer"})})}),(0,s.jsxs)(t.tbody,{children:[(0,s.jsx)(t.tr,{children:(0,s.jsx)(t.td,{children:"313367002"})}),(0,s.jsx)(t.tr,{children:(0,s.jsx)(t.td,{children:"311851381"})}),(0,s.jsx)(t.tr,{children:(0,s.jsx)(t.td,{children:"314961900"})}),(0,s.jsx)(t.tr,{children:(0,s.jsx)(t.td,{children:"314055403"})}),(0,s.jsx)(t.tr,{children:(0,s.jsx)(t.td,{children:"212201782"})})]})]})]})]})]})}function g(e={}){const{wrapper:t}={...(0,i.R)(),...e.components};return t?(0,s.jsx)(t,{...e,children:(0,s.jsx)(o,{...e})}):o(e)}function p(e,t){throw new Error("Expected "+(t?"component":"object")+" `"+e+"` to be defined: you likely forgot to import, pass, or provide it.")}},3484:(e,t,n)=>{n.d(t,{A:()=>r});const r=n.p+"assets/files/informasjonsmodell-trekkpalegg-2acd5d4db7e8a1b4e2db1528fe2f940f.png"},707:(e,t,n)=>{n.d(t,{A:()=>r});const r=n.p+"assets/files/trekkpalegg_oversikt-9f6c41a19b9be1fdf59eff74c1ab58b8.png"},15240:(e,t,n)=>{n.d(t,{A:()=>r});const r=n.p+"assets/images/informasjonsmodell-trekkpalegg-2acd5d4db7e8a1b4e2db1528fe2f940f.png"},97215:(e,t,n)=>{n.d(t,{A:()=>r});const r=n.p+"assets/images/trekkpalegg_oversikt-9f6c41a19b9be1fdf59eff74c1ab58b8.png"},28453:(e,t,n)=>{n.d(t,{R:()=>l,x:()=>a});var r=n(96540);const s={},i=r.createContext(s);function l(e){const t=r.useContext(i);return r.useMemo((function(){return"function"==typeof e?e(t):{...t,...e}}),[t,e])}function a(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:l(e.components),r.createElement(i.Provider,{value:t},e.children)}}}]);